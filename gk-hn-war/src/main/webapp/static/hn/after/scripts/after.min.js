define(function(e){var t=e("$");t(function(){function e(e){t(".error-tips").text(e).fadeIn(1e3).fadeOut(1e3)}function a(){t.ajax({url:"/exam/findUserExam.do",type:"GET",dataType:"JSON",data:{},success:function(e){var a=e.bizData.scores,o=e.bizData.ranking;t("#aggregateScore-input").val(a),t("#ranking-input").val(o),1==e.bizData.isReported?(console.log("用户提交过考后报考"),t("#aggregateScore-input").attr("readonly","readonly"),t("#ranking-input").attr("readonly","readonly")):(t("#aggregateScore-input").removeAttr("readonly").val(""),t("#ranking-input").removeAttr("readonly").val(""))}})}var o={yzmDreamSchool:t("#yzmDreamSchool"),volunteerBtn:t("#volunteer-flow1-btn"),schoolListinfo:t("#school-list-info")};t("#yzmDreamSchool").on("click",function(){t(this).attr("src","/verifyCode/randomVerifyCode.do?type=4&code="+Math.random())}).attr("src","/verifyCode/randomVerifyCode.do?type=4"),o.volunteerBtn.on("click",function(){var a=t("#candidateNumber-input").val().trim(),r=t("#aggregateScore-input").val().trim(),n=t("#ranking-input").val().trim(),i=t('input[name="subjectType"]:checked').val(),d=t("#yzmDreamSchool-input").val().trim(),c=/^[0-9]*[1-9][0-9]*$/;return""==a?(e("请输入考号"),!1):0==c.test(a)||10!=a.length?(e("请输入10位数字考号"),!1):""==r?(e("请输入分数"),!1):0==c.test(r)||3!=r.length?(e("请输入3位数字分数"),!1):""==n?(e("请输入位次"),!1):0==c.test(n)||n.length>6?(e("请输入小于6位数字位次"),!1):void 0==i?(e("选择文理科"),!1):""==d?(e("请填写验证码"),!1):void t.ajax({url:"/guide/batch.do",type:"GET",dataType:"JSON",data:{m_candidateNumber:a,m_aggregateScore:r,m_ranking:n,m_kelei:i,code:d},success:function(d){if("0100006"==d.rtnCode||"1000004"==d.rtnCode)return e(d.msg),!1;if("0100005"==d.rtnCode)return e(d.msg),t("#yzmDreamSchool").attr("src","/verifyCode/randomVerifyCode.do?type=4&code="+Math.random()),!1;if("0000000"==d.rtnCode){o.schoolListinfo.html("");var c=t.parseJSON(d.bizData);if(!c.data)return e("该分数暂无数据"),!1;t("#volunteer-flow1").hide(),t("#volunteer-flow2").show(),t("#scoresNum").text(r+"分"),t("#subType").text(i+"类"),t.each(c.data,function(e,d){t("#batch").text(c.data[0].m_batch);var m={m_candidateNumber:a,m_aggregateScore:r,m_ranking:n,m_kelei:i,m_batch_id:d.m_batch_id,m_batch:d.m_batch,m_province_id:"",m_province:"",m_specialty_id:"",m_specialty_name:"",m_favorites_by_university_codes:""},l=JSON.stringify(m),s='<div class="info2"><h3>普通'+d.m_batch+"院校</h3>"+d.m_years_fl+"：<strong>"+d.m_liberalarts+"分</strong>，<strong>"+d.m_science+'分</strong><form id="forwardForm" method="post" action="/forward.do"><input type="hidden" name="params" value="'+encodeURIComponent(l)+'" /><input type="hidden" name="url" value="/after/volunteer-flow3.jsp" /><input type="submit" class="btn" value="开始"></a></form></div>';o.schoolListinfo.append(s)})}t.ajax({url:"/exam/updateUserExam.do",type:"POST",dataType:"JSON",data:{scores:r,ranking:n,isReported:1},success:function(e){"0000000"==e.rtnCode&&console.log("成功")}})}})}),a(),t("#prev-btn").on("click",function(){t("#volunteer-flow1").show(),t("#volunteer-flow2").hide(),a(),t("#yzmDreamSchool").attr("src","/verifyCode/randomVerifyCode.do?type=4&code="+Math.random())})})});