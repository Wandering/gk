<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="cn.thinkjoy.gk.dao.ex.IEXVideoCourseDAO">
    <select id="getVideoListByParams" resultType="VideoCoursePojo">
        SELECT
        a.id AS courseId,
        b.classifyName AS classifyName,
        a.teacher AS teacherName,
        c.subjectName AS subjectName,
        a.title AS title,
        a.content AS content,
        a.frontcover1 AS frontCover,
        a.subcontent AS subcontent,
        a.hit AS hit,
        a.years AS years,
        a.areaId AS areaId
    FROM
        gk_video_course a
    LEFT JOIN gk_video_classify b ON a.classifyId = b.id
    LEFT JOIN gk_subject c ON a.subjectId = c.id
    WHERE
        b.id = #{classifyType}
        <if test="subjectId != null">
            AND a.subjectId = #{subjectId}
        </if>
        <if test="searchName != null">
            AND a.title LIKE  CONCAT('%', #{searchName} , '%')
        </if>
        <if test="areaId != null">
            AND a.areaId = #{areaId}
        </if>
        <if test="sortType == 1">
            ORDER BY a.createDate DESC
        </if>
        <if test="sortType == 2">
            ORDER BY a.hit DESC
        </if>
        limit ${offset}, ${rows}
    </select>
</mapper>