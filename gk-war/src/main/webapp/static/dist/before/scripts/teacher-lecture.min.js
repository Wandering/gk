define(function(t){function e(){s.getJSON("/before/video/getSubjectList.do",function(t){if("0000000"==t.rtnCode)for(var e=t.bizData,a=0;a<e.length;a++){var i=e[a].subjectName,n=e[a].subjectId,o='<option value="'+n+'">'+i+"</option>";s(".subjectList").append(o)}})}function a(t,e,a,n,o){s.getJSON("/before/video/getVideoList.do",{pageNo:t,pageSize:e,classifyType:1,sortType:a,subjectId:n,teacherSearchName:o},function(a){if(console.log(a),"0800001"==a.rtnCode&&(i.$listMsgItem.append('<p class="noContent">'+a.msg+"</p>"),i.$nextPage.hide()),"0000000"==a.rtnCode){var s=a.bizData;s.length>0&&i.$nextPage.show();for(var n=0;n<s.length;n++){var o=s[n].title,c=s[n].teacherName,l=s[n].hit,g=s[n].subcontent,d="";d=null==s[n].frontCover||""==s[n].frontCover?"/static/dist/common/images/video-default.png":r+s[n].frontCover;var p='<li class="item"><div class="img"><img src="'+d+'" alt=""/></div><div class="info"><span class="fl">课程名称:'+o+'</span><span class="fr">主讲专家:'+c+'</span></div><div class="num"><span class="fl">点击量:'+l+'</span></div><p class="txt">'+g+'</p><div class="funs"><a href="" class="btn">点击播放</a></div></li>';i.$listMsgItem.append(p)}t++,i.$listMsgItem.attr("pageNo",t),s.length<e&&i.$nextPage.hide()}})}var s=t("$");t("swiper"),t("backToTop"),t("getTime");var i={$listMsgItem:s("#list-msg-item"),$nextPage:s("#nextPage")},n=4,o=window.location.search,c=o.indexOf("?"),l=o.substr(c+19);s("#searchVal").val(l);var r="http://www.gkzy114.com";s("#search-btn").on("click",function(){window.location.href="/before/teacher-lecture.jsp?teacherSearchName="+s("#searchVal").val()}),e();s("#searchVal").val();i.$nextPage.on("click",function(){var t=i.$listMsgItem.attr("pageNo");a(t,n,1,"",l)}).click(),s(".subjectList").change(function(){var t=s(this).find("option:selected").attr("value"),e=s(".subject-fun").find("option:selected").attr("value");i.$listMsgItem.attr("pageNo",0);var o=i.$listMsgItem.attr("pageNo");i.$listMsgItem.html(""),a(o,n,e,t,l)}),s(".subject-fun").change(function(){var t=s(this).find("option:selected").attr("value"),e=s(".subjectList").find("option:selected").attr("value");i.$listMsgItem.attr("pageNo",0);var o=i.$listMsgItem.attr("pageNo");i.$listMsgItem.html(""),a(o,n,t,e,l)})});