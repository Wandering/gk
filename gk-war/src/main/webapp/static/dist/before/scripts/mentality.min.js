define(function(t){function e(){s.getJSON("/before/video/getSubjectList.do",function(t){if("0000000"==t.rtnCode)for(var e=t.bizData,a=0;a<e.length;a++){var n=e[a].subjectName,i=e[a].subjectId,o='<option value="'+i+'">'+n+"</option>";s(".subjectList").append(o)}})}function a(t,e,a,i,o){s.getJSON("/before/video/getVideoList.do",{pageNo:t,pageSize:e,classifyType:1,sortType:a,subjectId:i,teacherSearchName:o},function(a){if(console.log(a),"0800001"==a.rtnCode&&(n.$listMsgItem.append('<p class="noContent">'+a.msg+"</p>"),n.$nextPage.hide()),"0000000"==a.rtnCode){var s=a.bizData;s.length>0&&n.$nextPage.show();for(var i=0;i<s.length;i++){var o=s[i].title,l=s[i].teacherName,c=s[i].hit,r=s[i].subcontent,d="";d=null==s[i].frontCover||""==s[i].frontCover?"/static/dist/common/images/video-default.png":g+s[i].frontCover;var p='<li class="item"><div class="img"><img src="'+d+'" alt=""/></div><div class="info"><span class="fl">课程名称:'+o+'</span><span class="fr">主讲专家:'+l+'</span></div><div class="num"><span class="fl">点击量:'+c+'</span></div><p class="txt">'+r+'</p><div class="funs"><a href="" class="btn">点击播放</a></div></li>';n.$listMsgItem.append(p)}t++,n.$listMsgItem.attr("pageNo",t),s.length<e&&n.$nextPage.hide()}})}var s=t("$");t("swiper"),t("backToTop"),t("getTime");var n={$listMsgItem:s("#list-msg-item"),$nextPage:s("#nextPage")},i=4,o=decodeURIComponent(window.location.search),l=o.substr(14,1),c=o.indexOf("&"),r=o.substr(c+9);console.log(l),console.log(r),s("#searchVal").val(r);var g="http://www.gkzy114.com";s("#search-btn").on("click",function(){window.location.href="/before/mentality.jsp?classifyType=2&searchV="+encodeURIComponent(s("#searchVal").val())}),e();var d=s("#searchVal").val();n.$nextPage.on("click",function(){var t=n.$listMsgItem.attr("pageNo");a(t,i,1,"",d)}).click(),s(".subjectList").change(function(){var t=s(this).find("option:selected").attr("value"),e=s(".subject-fun").find("option:selected").attr("value");n.$listMsgItem.attr("pageNo",0);var o=n.$listMsgItem.attr("pageNo");n.$listMsgItem.html(""),a(o,i,e,t,d)}),s(".subject-fun").change(function(){var t=s(this).find("option:selected").attr("value"),e=s(".subjectList").find("option:selected").attr("value");n.$listMsgItem.attr("pageNo",0);var o=n.$listMsgItem.attr("pageNo");n.$listMsgItem.html(""),a(o,i,t,e,d)})});