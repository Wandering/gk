define(function(t){function e(){a.getJSON("/before/video/getSubjectList.do",function(t){if("0000000"==t.rtnCode)for(var e=t.bizData,s=0;s<e.length;s++){var n=e[s].subjectName,i=e[s].subjectId,o='<option value="'+i+'">'+n+"</option>";a(".subjectList").append(o)}})}function s(t,e,s,i,o){a.getJSON("/before/video/getVideoList.do",{pageNo:t,pageSize:e,classifyType:1,sortType:s,subjectId:i,searchName:o},function(s){if(console.log(s),"0800001"==s.rtnCode&&(n.$listMsgItem.append('<p class="noContent">'+s.msg+"</p>"),n.$nextPage.hide()),"0000000"==s.rtnCode){var a=s.bizData;a.length>0&&n.$nextPage.show();for(var i=0;i<a.length;i++){var o=a[i].title,l=a[i].teacherName,c=a[i].hit,r=a[i].subcontent,d="";d=null==a[i].frontCover||""==a[i].frontCover?"/static/dist/common/images/video-default.png":g+a[i].frontCover;var p='<li class="item"><div class="img"><img src="'+d+'" alt=""/></div><div class="info"><span class="fl">课程名称:'+o+'</span><span class="fr">主讲专家:'+l+'</span></div><div class="num"><span class="fl">点击量:'+c+'</span></div><p class="txt">'+r+'</p><div class="funs"><a href="" class="btn">点击播放</a></div></li>';n.$listMsgItem.append(p)}t++,n.$listMsgItem.attr("pageNo",t),a.length<e&&n.$nextPage.hide()}})}var a=t("$");t("swiper"),t("backToTop"),t("getTime");var n={$listMsgItem:a("#list-msg-item"),$nextPage:a("#nextPage")},i=4,o=decodeURIComponent(window.location.search),l=o.substr(14,1),c=o.indexOf("&"),r=o.substr(c+9);console.log(l),console.log(r),a("#searchVal").val(r);var g="http://www.gkzy114.com";a("#search-btn").on("click",function(){window.location.href="/before/mentality.jsp?classifyType=2&searchV="+encodeURIComponent(a("#searchVal").val())}),e();var d=a("#searchVal").val();n.$nextPage.on("click",function(){var t=n.$listMsgItem.attr("pageNo");s(t,i,1,"",d)}).click(),a(".subjectList").change(function(){var t=a(this).find("option:selected").attr("value"),e=a(".subject-fun").find("option:selected").attr("value");n.$listMsgItem.attr("pageNo",0);var o=n.$listMsgItem.attr("pageNo");n.$listMsgItem.html(""),s(o,i,e,t,d)}),a(".subject-fun").change(function(){var t=a(this).find("option:selected").attr("value"),e=a(".subjectList").find("option:selected").attr("value");n.$listMsgItem.attr("pageNo",0);var o=n.$listMsgItem.attr("pageNo");n.$listMsgItem.html(""),s(o,i,t,e,d)})});