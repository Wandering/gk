define(function(e){function t(){o.getJSON("/before/video/getSubjectList.do",function(e){if("0000000"==e.rtnCode)for(var t=e.bizData,a=0;a<t.length;a++){var s=t[a].subjectName,n=t[a].subjectId,i='<option value="'+n+'">'+s+"</option>";o(".subjectList").append(i)}})}function a(){o.ajax({url:"/vip/getAccount.do",type:"GET",dataType:"JSON",success:function(e){console.log(e);if("0000000"==e.rtnCode){var t=e.bizData.vipStatus;0==t&&o(".years-fun").append('<option value="2014">2014年</option><option value="2013">2013年</option>'),1==t&&o(".years-fun").append('<option value="2015">2015年(vip用户专享)</option><option value="2014">2014年</option><option value="2013">2013年</option>')}}})}function s(e,t,a,s,c){o.getJSON("/before/paper/getPaperList.do",{pageNo:e,pageSize:t,sortType:1,years:s,subjectId:a,searchName:c},function(a){if("0800001"==a.rtnCode&&(n.$listMsgItem.append('<p class="noContent">'+a.msg+"</p>"),n.$nextPage.hide()),"0000000"==a.rtnCode){var s=a.bizData;s.length>0&&n.$nextPage.show();for(var o=0;o<s.length;o++){var c=s[o].paperName,r=s[o].createDate,l=s[o].subjectId,p=s[o].resources,g="";switch(l){case 1:g="语文";break;case 3:g="英语";break;case 10:g="理综";break;case 11:g="文综";break;default:g="其他"}var u='<li class="item"><a target="_blank" href="'+i+p+'"><span class="subject-n"><strong>'+g+'</strong></span><span class="subject-t">'+c+'</span><span class="subject-d">上传时间：'+getTime(r)+"</span></a></li>";n.$listMsgItem.append(u)}e++,n.$listMsgItem.attr("pageNo",e),s.length<t&&n.$nextPage.hide()}})}var o=e("$");e("swiper"),e("backToTop"),e("getTime");var n={$listMsgItem:o("#list-msg-item"),$nextPage:o("#nextPage")},i="http://www.gkzy114.com",c=decodeURIComponent(window.location.search),r=c.substr(14,1),l=c.indexOf("&"),p=c.substr(l+9);console.log(r),console.log(p),o("#searchVal").val(p),o("#search-btn").on("click",function(){window.location.href="/before/exam.jsp?classifyType=3&searchV="+o("#searchVal").val()}),t(),a();var g=8,u=o("#searchVal").val();n.$nextPage.on("click",function(){var e=n.$listMsgItem.attr("pageNo");o.ajax({url:"/vip/getAccount.do",type:"GET",dataType:"JSON",success:function(t){if(console.log(t),"0000000"==t.rtnCode){var a=t.bizData.vipStatus;0==a&&s(e,g,"","2014",u),1==a&&s(e,g,"","2015",u)}}})}).click(),o(".subjectList").change(function(){var e=o(this).find("option:selected").attr("value"),t=o(".years-fun").find("option:selected").attr("value");n.$listMsgItem.attr("pageNo",0);var a=n.$listMsgItem.attr("pageNo");n.$listMsgItem.html(""),s(a,g,e,t,""),o("#searchVal").val("")}),o(".years-fun").change(function(){var e=o(this).find("option:selected").attr("value"),t=o(".subjectList").find("option:selected").attr("value");n.$listMsgItem.attr("pageNo",0);var a=n.$listMsgItem.attr("pageNo");n.$listMsgItem.html(""),s(a,g,t,e,""),o("#searchVal").val("")})});