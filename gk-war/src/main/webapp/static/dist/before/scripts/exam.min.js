define(function(e){function t(){s.getJSON("/before/video/getSubjectList.do",function(e){if("0000000"==e.rtnCode)for(var t=e.bizData,a=0;a<t.length;a++){var n=t[a].subjectName,o=t[a].subjectId,r='<option value="'+o+'">'+n+"</option>";s(".subjectList").append(r)}})}function a(e,t,a,r,i){s.getJSON("/before/paper/getPaperList.do",{pageNo:e,pageSize:t,sortType:1,years:r,subjectId:a,searchName:i},function(a){if(console.log(a),"0800001"==a.rtnCode&&(n.$listMsgItem.append('<p class="noContent">'+a.msg+"</p>"),n.$nextPage.hide()),"0000000"==a.rtnCode){var s=a.bizData;s.length>0&&n.$nextPage.show();for(var r=0;r<s.length;r++){var i=s[r].paperName,c=s[r].createDate,l=s[r].subjectId,g=s[r].resources,p="";switch(l){case 1:p="语文";break;case 3:p="英语";break;case 10:p="理综";break;case 11:p="文综";break;default:p="其他"}var m='<li class="item"><a target="_blank" href="'+o+g+'"><span class="subject-n"><strong>'+p+'</strong></span><span class="subject-t">'+i+'</span><span class="subject-d">上传时间：'+getTime(c)+"</span></a></li>";n.$listMsgItem.append(m)}e++,n.$listMsgItem.attr("pageNo",e),s.length<t&&n.$nextPage.removeClass("btn-primary").text("没有更多消息了")}})}var s=e("$");e("swiper"),e("backToTop"),e("getTime");var n={$listMsgItem:s("#list-msg-item"),$nextPage:s("#nextPage")},o="http://www.gkzy114.com",r=window.location.search,i=r.indexOf("?"),c=r.substr(i+16);s("#searchVal").val(c),s("#search-btn").on("click",function(){window.location.href="/before/exam.jsp?examSearchName="+s("#searchVal").val()}),t();var l=8,g=s("#searchVal").val();console.log(g),n.$nextPage.on("click",function(){var e=n.$listMsgItem.attr("pageNo");a(e,l,"",g)}).click(),s(".subjectList").change(function(){var e=s(this).find("option:selected").attr("value");n.$listMsgItem.attr("pageNo",0);var t=n.$listMsgItem.attr("pageNo");n.$listMsgItem.html(""),a(t,l,e,c)}),s(".years-fun").change(function(){var e=(s(this).find("option:selected").attr("value"),s(".subjectList").find("option:selected").attr("value"));n.$listMsgItem.attr("pageNo",0);var t=n.$listMsgItem.attr("pageNo");n.$listMsgItem.html(""),a(t,l,sortType,e,c)})});