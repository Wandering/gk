define(function(e){function s(e){var s=new RegExp("(^|\\?|&)"+e+"=([^&]*)(\\s|&|$)","i");return s.test(window.location.href)?unescape(RegExp.$2.replace(/\+/g," ")):""}var t=e("$");e("swiper");var n={renderAsk:function(e){var s=[],t=e.question;if(t){s.push('<section class="ask-answer mt20">'),s.push('<div class="ask mt20">'),s.push('<div class="head-img">'),s.push('<img src="'+t.userIcon||'" />'),s.push("</div>"),s.push('<div class="head-info">'),s.push("<h6>来自 "+t.userName||"匿名专家"+new Date(t.createTime).Format("yyyy-MM-dd hh-mm")+"</h6>");for(var n=t.questions,i=[],u=0,a=n.length;a>u;u++)i.push(n[u].text);s.push("<h3>"+i.join("")+"</h3>"),s.push("</div></div>")}var r=e.answer;r&&s.push(this.renderAnswer(r)),s.push("</section>")},renderList:function(e,s){for(var n=[],i=0,u=s.length;u>i;i++){var a=s[i].question,r=[];if(a)for(var o=a.questions,d=0,h=o.length;h>d;d++)r.push(o[d].text);r.length>0&&n.push('<li><a target="_blank" href="/question/question_detile.jsp?id='+a.userId+'">'+r.join("")+"</a></li>")}t("#"+e).html(n.join(""))},renderAnswer:function(e){var s=[];s.push('<ul class="answer-list">'),s.push("<li>"),s.push('<div class="left">'),s.push('<div class="head-img">'),s.push('<img src="'+e.userIcon+'" />'),s.push('<i class="star"></i>'),s.push("</div>"),s.push("<span>"+e.userName+"</span>"),s.push("</div>");for(var t=e.answers,n=[],i=0,u=t.length;u>i;i++)n.push("<p>"+t[i].text+"</p>"),n.push('<p><img src="'+t[i].img+'" /></p>');s.push('<div class="right">'+n.join("")+"</div>"),s.push("</li></ul>")},get:function(e){var s=this;t.get("/question/questionDetail.do?id="+e,function(e){"0000000"===e.rtnCode&&s.renderAsk(e.bizData)})},getNew:function(){var e=this;t.get("/question/newQuestion.do?startSize=0&endSize=5",function(s){"0000000"===s.rtnCode&&e.renderList("new",s.bizData)})},getHot:function(){var e=this;t.get("/question/hotQuestion.do?startSize=0&endSize=5",function(s){"0000000"===s.rtnCode&&e.renderList("hot",s.bizData)})},updateReadNum:function(e){t.ajax({type:"post",url:"/question/updateBrowseNum.do",contentType:"application/x-www-form-urlencoded;charset=utf-8",data:{id:e},dataType:"json",success:function(e){},error:function(e){}})}};t(document).ready(function(){var e=s("id");n.get(e),n.updateReadNum(e),n.getNew(),n.getHot()})});