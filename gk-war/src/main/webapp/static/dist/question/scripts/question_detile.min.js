define(function(e){function s(e){var s=new RegExp("(^|\\?|&)"+e+"=([^&]*)(\\s|&|$)","i");return s.test(window.location.href)?unescape(RegExp.$2.replace(/\+/g," ")):""}var t=e("$");e("swiper");var i={renderAsk:function(e){var s=[],t=e.question;if(t){s.push('<section class="ask-answer mt20">'),s.push('<div class="ask mt20">'),s.push('<div class="head-img">'),s.push('<img src="'+t.userIcon||'" />'),s.push("</div>"),s.push('<div class="head-info">'),s.push("<h6>来自 "+t.userName||"匿名专家"+new Date(t.createTime).Format("yyyy-MM-dd hh-mm")+"</h6>");for(var i=t.questions,n=[],r=0,u=i.length;u>r;r++)n.push(i[r].text);s.push("<h3>"+n.join("")+"</h3>"),s.push("</div></div>")}var a=e.answer;a&&s.push(this.renderAnswer(a)),s.push("</section>")},renderList:function(e,s){for(var i=[],n=0,r=s.length;r>n;n++){var u=s[n].question,a=[];if(u)for(var o=u.questions,n=0,r=o.length;r>n;n++)a.push(o[n].text);a.length>0&&i.push('<li><a target="_blank" href="/question/question_detile.jsp?id='+s[n].userId+'">'+a.join("")+"</a></li>")}t("#"+e).html(i.join(""))},renderAnswer:function(e){var s=[];s.push('<ul class="answer-list">'),s.push("<li>"),s.push('<div class="left">'),s.push('<div class="head-img">'),s.push('<img src="'+e.userIcon+'" />'),s.push('<i class="star"></i>'),s.push("</div>"),s.push("<span>"+e.userName+"</span>"),s.push("</div>");for(var t=e.answers,i=[],n=0,r=t.length;r>n;n++)i.push("<p>"+t[n].text+"</p>"),i.push('<p><img src="'+t[n].img+'" /></p>');s.push('<div class="right">'+i.join("")+"</div>"),s.push("</li></ul>")},get:function(e){var s=this;t.get("/question/questionDetail.do?id="+e,function(e){"0000000"===e.rtnCode&&s.renderAsk(e.bizData)})},getNew:function(){var e=this;t.get("/question/newQuestion.do?startSize=0&endSize=5",function(s){"0000000"===s.rtnCode&&e.renderList("new",s.bizData)})},getHot:function(){var e=this;t.get("/question/hotQuestion.do?startSize=0&endSize=5",function(s){"0000000"===s.rtnCode&&e.renderList("hot",s.bizData)})}};t(document).ready(function(){var e=s("id");i.get(e),i.getNew(),i.getHot()})});