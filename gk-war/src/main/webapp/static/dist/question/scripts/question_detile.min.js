define(function(e){function s(e){var s=new RegExp("(^|\\?|&)"+e+"=([^&]*)(\\s|&|$)","i");return s.test(window.location.href)?unescape(RegExp.$2.replace(/\+/g," ")):""}var t=e("$");e("swiper");var n={renderAsk:function(e){var s=[],n=e.question;if(n){s.push('<section class="ask-answer mt20">'),s.push('<div class="ask mt20">'),s.push('<div class="head-img">'),s.push('<img src="'+(n.userIcon||"/static/src/common/images/user_default.png")+'" />'),s.push("</div>"),s.push('<div class="head-info">'),s.push("<h6>来自 "+(n.userName||"匿名专家")+new Date(n.createTime).Format("yyyy-MM-dd hh:mm")+"</h6>");for(var i=n.questions,u=[],a=[],r=0,o=i.length;o>r;r++)u.push(i[r].text),i[r].img&&a.push('<img src="'+i[r].img+'" />');s.push("<h3>"+u.join("")+"</h3>"),s.push("<p>"+a.join("")+"</hp>"),s.push("</div></div>")}var h=e.answer;h&&h.answers&&h.answers.length>0&&s.push(this.renderAnswer(h)),s.push("</section>"),t("#section_article").html(s.join(""))},renderList:function(e,s){for(var n=[],i=0,u=s.length;u>i;i++){var a=s[i].question,r=[];if(a)for(var o=a.questions,h=0,d=o.length;d>h;h++)o[h].text&&r.push(o[h].text);r.length>0&&n.push('<li><a target="_blank" href="/question/question_detile.jsp?id='+a.questionId+'">'+r.join("")+"</a></li>")}t("#"+e).html(n.join(""))},renderAnswer:function(e){var s=[];s.push('<ul class="answer-list">'),s.push("<li>"),s.push('<div class="left">'),s.push('<div class="head-img">'),s.push('<img src="'+(e.userIcon||"/static/src/common/images/user_default.png")+'" />'),s.push('<i class="star"></i>'),s.push("</div>"),s.push("<span>"+e.userName+"</span>"),s.push("</div>");for(var t=e.answers,n=[],i=0,u=t.length;u>i;i++)t[i].text&&n.push("<p>"+t[i].text+"</p>"),t[i].img&&n.push('<p><img src="'+t[i].img+'" /></p>');return s.push('<div class="right">'+n.join("")+"</div>"),s.push("</li></ul>"),s.join("")},get:function(e){var s=this;t.get("/question/questionDetail.do?id="+e,function(e){"0000000"===e.rtnCode&&s.renderAsk(e.bizData)})},getNew:function(){var e=this;t.get("/question/newQuestion.do?startSize=0&endSize=5",function(s){"0000000"===s.rtnCode&&e.renderList("new",s.bizData)})},getHot:function(){var e=this;t.get("/question/hotQuestion.do?startSize=0&endSize=5",function(s){"0000000"===s.rtnCode&&e.renderList("hot",s.bizData)})},updateReadNum:function(e){t.ajax({type:"post",url:"/question/updateBrowseNum.do",contentType:"application/x-www-form-urlencoded;charset=utf-8",data:{id:e},dataType:"json",success:function(e){},error:function(e){}})}};t(document).ready(function(){var e=s("id");n.get(e),n.updateReadNum(e),n.getNew(),n.getHot()})});