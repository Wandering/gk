define(function(e){var t=e("$");e("swiper");var s=function(e,t){var s,i=new RegExp("(^|)"+t+"=([^&]*)(&|$)","g").exec(e);return(s=i)?s[2]:""},i={startSize:0,endSize:10,renderAsk:function(e){for(var s=[],i=0,n=e.length;n>i;i++){var a=e[i].question;if(a){s.push('<section class="ask-answer mt20">'),s.push('<div class="ask mt20">'),s.push('<div class="head-img">'),s.push('<img src="'+(a.userIcon||"")+'" />'),s.push("</div>"),s.push('<div class="head-info">');var r=new Date(a.createTime).Format("yyyy-MM-dd hh:mm");console.log(r),s.push("<h6>来自 "+a.userName||"匿名专家  "+r+"</h6>");for(var o=a.questions,h=[],u=0,d=o.length;d>u;u++)h.push(o[u].text);s.push("<h3>"+h.join("")+"</h3>"),s.push("</div></div>")}var c=e[i].answer;c&&s.push(this.renderAnswer(c)),s.push("</section>")}0==this.startSize?t("#question_content").html(s.join("")):t("#question_content").append(s.join(""))},renderAnswer:function(e){var t=[];t.push('<ul class="answer-list">'),t.push("<li>"),t.push('<div class="left">'),t.push('<div class="head-img">'),t.push('<img src="'+e.userIcon+'" />'),t.push('<i class="star"></i>'),t.push("</div>"),t.push("<span>"+e.userName+"</span>"),t.push("</div>");for(var s=e.answers,i=[],n=0,a=s.length;a>n;n++)i.push("<p>"+s[n].text+"</p>"),i.push('<p class="ta"><img src="'+s[n].img+'" /></p>');return t.push('<div class="right">'+i.join("")+"</div>"),t.push("</li></ul>"),t.join("")},getNew:function(){var e="/question/newQuestion.do?";this.getData(e)},getHot:function(){var e="/question/hotQuestion.do?";this.getData(e)},getData:function(e){var s=this;t.get(e+"startSize="+s.startSize+"&endSize="+s.endSize,function(e){"0000000"===e.rtnCode&&(e.bizData.length>0?(t("#more_loading").hide(),s.renderAsk(e.bizData)):(t("#more_loading").hide(),t("#question_content").html('<p style="padding: 20px 0;text-align: center">暂无相关信息！</p>')))})},getSearch:function(){var e=t("#keywords").val();if(e){this.startSize=0,this.endSize=10;var s="/question/newQuestion.do?keyword="+e+"&";this.getData(s)}},addEventForMore:function(){this.startSize+=10,this.endSize+=10,i[t(".tabs-list li.active").attr("data-method")]()}};t(document).ready(function(){var e=decodeURIComponent(s(window.location.href,"val"));e?(t("#tabs_list").hide(),t("#keywords").val(e),i.getSearch()):(t("#tabs_list").show(),i.getNew(),t(".tabs-list li").on("mouseover",function(e){t(this).hasClass("active")||(t(this).addClass("active").siblings().removeClass("active"),i.startSize=0,i.endSize=10,i[t(this).attr("data-method")]())})),t("#search").on("click",function(e){i.getSearch()})})});