define(function(t){var e=t("$");t("swiper");var s=function(t,e){var s,i=new RegExp("(^|)"+e+"=([^&]*)(&|$)","g").exec(t);return(s=i)?s[2]:""},i={startSize:0,endSize:10,renderAsk:function(t){for(var s=[],i=0,n=t.length;n>i;i++){var a=t[i].question;if(a){s.push('<a href="/question/question_detile.jsp?id='+a.questionId+'"><section class="ask-answer mt20">'),s.push('<div class="ask mt20">'),s.push('<div class="head-img">');var r=a.userIcon||"/static/src/common/images/user_default.png";"aa.jpg".match(/(.jpg|.png|.gif)/g)||(r="/static/src/common/images/user_default.png"),s.push('<img src="'+(r||"")+'" />'),s.push("</div>"),s.push('<div class="head-info">');var o=new Date(a.createTime).Format("yyyy-MM-dd hh:mm");s.push("<h6>来自 "+(a.userName||"匿名专家  ")+o+"</h6>");for(var h=a.questions,u=[],d=0,c=h.length;c>d;d++)u.push(h[d].text);s.push("<h3>"+u.join("").substring(0,200)+"...</h3>"),s.push("</div></div>")}var l=t[i].answer;l&&s.push(this.renderAnswer(l)),s.push("</section></a>")}0==this.startSize?e("#question_content").html(s.join("")):e("#question_content").append(s.join(""))},renderAnswer:function(t){var e=[];e.push('<ul class="answer-list">'),e.push("<li>"),e.push('<div class="left">'),e.push('<div class="head-img">'),e.push('<img src="'+(t.userIcon||"/static/src/common/images/user_default.png")+'" />'),e.push('<i class="star"></i>'),e.push("</div>"),e.push("<span>"+(t.userName||"匿名")+"</span>"),e.push("</div>");for(var s=t.answers,i=[],n=0,a=s.length;a>n;n++)i.push("<p>"+s[n].text+"</p>"),s[n].img&&i.push('<p class="ta"><img src="'+s[n].img+'" /></p>');var r=i.join("");return e.push('<div class="right">'+r.substring(0,200)+"...</div>"),e.push("</li></ul>"),e.join("")},getNew:function(){var t="/question/newQuestion.do?";this.getData(t)},getHot:function(){var t="/question/hotQuestion.do?";this.getData(t)},getData:function(t){0==this.startSize&&(e(".next-btn").removeClass("none"),e(".next-btn").text("加载更多..."));var s=this;e.get(t+"startSize="+s.startSize+"&endSize="+s.endSize,function(t){"0000000"===t.rtnCode&&(t.bizData.length>0?(e("#more_loading").show(),s.renderAsk(t.bizData)):0==s.startSize?(e("#more_loading").hide(),e("#question_content").html('<p style="padding: 20px 0;text-align: center">暂无相关信息！</p>')):(e(".next-btn").text("暂无更多信息！"),e(".next-btn").addClass("none")))})},getSearch:function(){var t=e("#keywords").val();e("#tabs_list").hide(),this.startSize=0,this.endSize=10;var s="/question/newQuestion.do?keyword="+t+"&";this.getData(s)},addEventForMore:function(){this.startSize+=10,this.endSize+=10;var t=e("#keywords").val();if(t){var s="/question/newQuestion.do?keyword="+t+"&";this.getData(s)}else i[e(".tabs-list li.active").attr("data-method")]()}};e(document).ready(function(){var t=decodeURIComponent(s(window.location.href,"val"));t?(e("#tabs_list").hide(),e("#keywords").val(t),i.getSearch()):(e("#tabs_list").show(),i.getNew(),e(".tabs-list li").on("mouseover",function(t){e(this).hasClass("active")||(e(this).addClass("active").siblings().removeClass("active"),i.startSize=0,i.endSize=10,i[e(this).attr("data-method")]())})),e("#search").on("click",function(t){i.getSearch()}),e(".next-btn").on("click",function(t){e(this).hasClass("none")||i.addEventForMore()})})});