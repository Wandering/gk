define(function(o){function e(o){var e=new RegExp("(^|\\?|&)"+o+"=([^&]*)(\\s|&|$)","i");return e.test(window.location.href)?unescape(RegExp.$2.replace(/\+/g," ")):""}function t(){var o=n("#content").val();if(!o)return n("#error").show().html("内容不能为空！"),void setTimeout(function(){n("#error").hide()},2e3);console.log(o);var t=!1;t||(t=!0,n.ajax({type:"post",url:"/question/insert.do",contentType:"application/x-www-form-urlencoded;charset=utf-8",data:{question:o},dataType:"json",success:function(o){if(t=!1,"0000000"===o.rtnCode){r.html(""),n("#custom_body").html('<p class="error-contnet">提交成功！</p>'),n("#custom_model").fadeIn(500),n("#custom_model").off("click"),n("#custom_model").on("click",function(o){o.stopPropagation()}),n("#model_button").off("click"),n("#model_button").on("click",function(o){n("#custom_model").fadeOut(500)});var i=e("path");"online"===i&&(window.location.href="/user/online-answer.jsp")}else n("#error").show().html(o.msg);"1000004"===o.rtnCode&&(n("#error_tip").html(o.msg+",请<a target='_blank' href='/login/login.jsp'>登录</a>"),n("#error_tip").show())},error:function(o){t=!1,n("#error").show().html("服务器错误。")}}))}var n=o("$");o("header-user"),o("swiper");var r;KindEditor.ready(function(o){var e=window.location,t=e.protocol+"//"+e.host+"/question/proxy.html";r=o.create('textarea[name="content"]',{resizeType:1,allowImageRemote:!1,formatUploadUrl:!1,uploadJson:"http://10.21.67.8:8080/file/upload/saveiframefile.shtml?redirectPath="+t,filePostName:"file",allowPreviewEmoticons:!1,allowFileManager:!1,items:["plainpaste","insertorderedlist","insertunorderedlist","forecolor","hilitecolor","bold","italic","underline","|","image","fullscreen"],afterBlur:function(){this.sync()},afterChange:function(){},afterUpload:function(o){console.log(o)}})}),n(document).ready(function(){n("#submit_question").on("click",function(o){t()})})});