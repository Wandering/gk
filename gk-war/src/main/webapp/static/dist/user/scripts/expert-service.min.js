define(function(t){function e(t){var e=new Date;return e.setTime(t),e.Format("yyyy-MM-dd")}var i=t("$");t("header-user"),Date.prototype.Format=function(t){var e={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var i in e)new RegExp("("+i+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?e[i]:("00"+e[i]).substr((""+e[i]).length)));return t};var n={num:1,size:10,next:i(".more"),search:i("#search"),btnSearch:i("#btn-search"),renderContainer:i(".data-list"),getList:function(t,a,s){i.ajax({url:"/appointment/getAppointment.do",dataType:"json",type:"get",data:{pageNo:t,pageSize:a,titleKey:s},success:function(t){if("0000000"==t.rtnCode){var s="";i.each(t.bizData,function(t,i){s+='<a class="row go-detail" href="javascript:void(0);"> <div class="col-3 title" data-id="'+i.id+'">'+i.title+'</div> <div class="col-1 createTime">'+e(i.createDate)+"</div> </a>"}),t.bizData.length>a?n.next.hide():n.next.show(),n.renderContainer.html(s)}}})}};n.getList(n.num,n.size),n.next.on("click",function(){n.getList(2,10)}),n.search.keydown(function(){13==event.keyCode&&n.getList(n.num,n.size,n.search.val())}),n.btnSearch.click(function(){n.getList(n.num,n.size,n.search.val())}),i(document).on("click",".go-detail",function(t){t.stopPropagation();var e=i(this).find(".title").attr("data-id");window.location.href="http://"+window.location.host+"/user/expert-service-detail.jsp?id="+e})});