define(function(e){var t=e("$");e("laydate"),e("swiper"),t(".btn-submit").click(function(){var e=t(".data-start").val(),a=t(".data-end").val(),n=Date.parse(new Date(e))/1e3,r=Date.parse(new Date(a))/1e3,d=t(".order-theme").val().trim(),i=t("#content").val(),o=t(".name").val(),s=t(".mobile").val(),l=t(".qq").val();if(d.length>50)return t(".error-tips").text("标题字数过长，请输入50字以内").fadeIn(1e3).fadeOut(3e3),!1;if(i.length>500)return t(".error-tips").text("预约内容过长，500字以内").fadeIn(1e3).fadeOut(3e3),!1;if(0==i.length||0==d.length||0==r.length||0==n.length||0==o.length||0==s.length||0==l.length)return t(".error-tips").text("为了保证内容完整性，该表单每项都必填。").fadeIn(1e3).fadeOut(3e3),!1;var f=/^\s*[.0-9]{5,11}\s*$/;if(!f.test(l))return t(".error-tips").text("QQ号码输入有误").fadeIn(1e3).fadeOut(3e3),!1;var p=/^0?1[3|4|5|6|7|8][0-9]\d{8}$/;return p.test(s)?void t.ajax({url:"/appointment/addAppointment.do",dataType:"json",type:"post",data:{title:d,content:i,startDate:n,endDate:r,name:o,mobile:s,qq:l},success:function(e){"0000000"==e.rtnCode?(t(".error-tips").text("恭喜你，预约成功").fadeIn(1e3).fadeOut(3e3),window.location.href="http://"+window.location.host+"user/expert-service-detail.jsp"):t(".error-tips").text("对不起，预约失败").fadeIn(1e3).fadeOut(3e3)}}):(t(".error-tips").text("预约电话号码输入有误").fadeIn(1e3).fadeOut(3e3),!1)})});