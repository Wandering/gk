define(function(t){function e(t){var e=new Date;return e.setTime(t),e.Format("yyyy-MM-dd")}var a=t("$");t("header-user"),t("laydate"),Date.prototype.Format=function(t){var e={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var a in e)new RegExp("("+a+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?e[a]:("00"+e[a]).substr((""+e[a]).length)));return t},""!=a("#accountNum").attr("accountNum")&&console.log(22),a.get("/vip/getAccount.do",function(t){a(".account-tel").text(t.bizData.account)}),a.get("/info/getUserInfo.do",function(t){if("0000000"==t.rtnCode){var o=t.bizData;console.log(o);var r;r=""==o.icon||null==o.icon?"/static/dist/common/images/icon_default.png":o.icon,a(".avatar-img").attr("src",r),a(".avatar-box").show(),a(".name").attr("value",o.name),a(".school").attr("value",o.schoolName),a(".birthdayDate").attr("value",e(o.birthdayDate)),a(".sex").attr("value",o.sex),a(".subject").attr("value",o.subjectType),a(".mail").attr("value",o.mail),a(".qq").attr("value",o.qq),1==o.sex&&a("#sex_m").attr("checked",!0),1!=o.subjectType&&a("#subject_l").attr("checked",!0)}else alert(t.msg)}),a.ajax({url:"/region/getAllRegion.do",dataType:"json",type:"get",data:{},success:function(t){console.log(t)}}),a(".content").fadeIn();var o,r;o=a("#sex_w").attr("checked")?1:0,r=(a("#subject_w").attr("checked"),1),a(".btn-submit").click(function(){var t=a(".school").val(),e=a(".birthdayDate").val(),n=Date.parse(new Date(e))/1e3;console.log(n);var s=a(".name").val().trim();if(s.length>10)return a(".error-tips").text("用户名不能大于10个字").fadeIn(),!1;var c=a(".mail").val().trim(),i=/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+((\.[a-zA-Z0-9_-]{2,3}){1,2})$/;if(!i.test(c))return a(".error-tips").text("邮箱填写有误").fadeIn(),!1;var l=/^\s*[.0-9]{5,11}\s*$/,u=a(".qq").val().trim();return l.test(u)?void a.ajax({url:"/info/updateUserInfo.do",dataType:"json",type:"post",data:{name:s,countyId:"2",schoolName:t,sex:o,birthdayDate:n,subjectType:r,mail:c,icon:"http://img1.2345.com/duoteimg/qqTxImg/2013/12/ka_3/04-054658_103.jpg",qq:u},success:function(t){"0000000"==t.rtnCode?a(".error-tips").text("信息更新成功").fadeIn(1e3).fadeOut(2e3):a(".content").text(t.msg)}}):(a(".error-tips").text("QQ号码输入有误").fadeIn(),!1)})});