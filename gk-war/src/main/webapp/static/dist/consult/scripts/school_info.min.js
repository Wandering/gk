define(function(t){var e=t("$");t("swiper");var a={curPage:1,totalPage:0,render:function(t,e){var a=[],i=0,s=e.length;for(a.push('<a class="active" id="0">全部</a>');s>i;i++)a.push('<a id="'+e[i].id+'">'+e[i].name+"</a>");t.html(a.join(""))},show:function(t,a){this.render(e("#"+t),a),this.addEventForOption()},getData:function(){var t=this;e.each(["provinces","universityType","universityBatch","universityFeature"],function(e,a){t.show(a,i[a])}),this.getSchoolList(1)},addEventForOption:function(){var t=this;e(".options a").on("click",function(a){e(this).hasClass("active")||(e(this).addClass("active").siblings().removeClass("active"),t.getSchoolList(1))})},renderSchool:function(t){var a=[],i=0,s=t.length;for(a.push('<table border="0" cellpadding="0" cellspacing="0"><thead><tr><th class="name">院校名称</th><th>所在地区</th><th>院校类型</th><th>院校隶属</th><th>院校特征</th><th>院校信息</th></tr></thead><tbody>');s>i;i++){var n=i%2!=0?"active":"";a.push('<tr class="'+n+'"><td class="name">'+t[i].name+"</td><td>"+t[i].provinceName+"</td><td>"+t[i].universityType+"</td><td>"+t[i].subjection+"</td><td>"+t[i].property+'</td><td><a href="/consult/school_detile.jsp?id='+t[i].code+'">查看详情</a></td></tr>')}a.push("</tbody></table>"),e("#school_list").html(a.join(""))},getSchoolList:function(t){var a=(e("#provinces a.active").attr("id"),e("#provinces a.active").text());"全部"===a&&(a="");var i=(e("#universityType a.active").attr("id"),e("#universityType a.active").text());"全部"===i&&(i="");var n=(e("#universityBatch a.active").attr("id"),e("#universityBatch a.active").text());"全部"===n&&(n="");var r=(e("#universityFeature a.active").attr("id"),e("#universityFeature a.active").text());"全部"===r&&(r="");var c=(e("#school_serach").val(),this),o=s.schoolList;c.renderSchool(o),1==t&&c.renderPage(1,s.schoolCount)},renderPage:function(t,a){this.totalPage=Math.ceil(a/10);var i=[],s=10*(t-1)+1;i.push('<span class="record">共'+a+'条记录 <span class="startNum">'+s+"</span>/"+a+"</span>"),i.push('<a class="previous-page">上一页</a>');for(var n=0;n<this.totalPage;n++){var r=n+1;t==r?i.push('<a class="active">'+r+"</a>"):i.push("<a>"+r+"</a>")}i.push('<a class="next-page">下一页</a>'),e("#page").html(i.join("")),this.pageEventHandle()},pageEventHandle:function(){var t=this;e("#page a").on("click",function(a){if(!e(this).hasClass("active")&&(e(this).addClass("active").siblings().removeClass("active"),e(this).hasClass("previous-page")?t.curPage--:e(this).hasClass("next-page")?t.curPage++:t.curPage=parseInt(e(this).text()),t.curPage>0&&t.curPage<=t.totalPage)){var i=10*(t.curPage-1)+1;e(".startNum").text(i),t.getSchoolList(t.curPage)}})}},i={provinces:[{id:1,name:"北京市"},{id:2,name:"天津市"}],universityType:[{id:1,name:"综合"},{id:2,name:"工科"}],universityBatch:[{id:1,name:"一批本科"},{id:2,name:"二批本科"}],universityFeature:[{id:1,name:"985"},{id:2,name:"211"},{id:3,name:"研"}]},s={schoolCount:20,currentPage:1,schoolList:[{id:1,code:10,name:"北京大学1",provinceName:"北京",universityType:"综合",subjection:"地方政府所属",property:"985,211",url:"http://www.baidu.com"},{id:2,code:11,name:"北京大学2",provinceName:"北京",universityType:"综合",subjection:"地方政府所属",property:"985,211",url:"http://www.baidu.com"},{id:3,code:12,name:"北京大学3",provinceName:"北京",universityType:"综合",subjection:"地方政府所属",property:"985,211",url:"http://www.baidu.com"}]};e(document).ready(function(){a.getData()})});