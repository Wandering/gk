define(function(a){var t=a("$");a("swiper");var s={curPage:1,totalPage:0,render:function(a){var s=[],e=[],i=[],o=0,n=a.length;for(s.push('<a class="both active">全部</a>'),e.push('<a class="both active">全部</a>'),i.push('<a class="both active">全部</a>');n>o;o++){s.push('<a data-id="'+a[o].id+'">'+a[o].name+"</a>");for(var r=a[o].subjectType,c=0,h=r.length;h>c;c++){e.push('<a class="'+a[o].id+'" data-id="'+r[c].id+'">'+r[c].name+"</a>");for(var d=r[c].majoredType,l=0,p=d.length;p>l;l++)i.push('<a class="'+r[c].id+'" data-id="'+d[l].id+'">'+d[l].name+"</a>")}}t("#batch").html(s.join("")),t("#classify").html(e.join("")),t("#profession").html(i.join("")),this.addEventHandle(),this.getProfession(1)},addEventHandle:function(){var a=this;t("#batch a").on("click",function(s){if(!t(this).hasClass("active")){t(this).addClass("active").siblings().removeClass("active");var e=t(this).attr("data-id");e?t("#classify a."+e).show().siblings().hide():t("#classify a").show(),t("#classify a.both").show().addClass("active").siblings().removeClass("active"),t("#profession_content").hide(),t("#profession a").removeClass("active"),a.getProfession(1)}}),t("#classify a").on("click",function(s){if(!t(this).hasClass("active")){t(this).addClass("active").siblings().removeClass("active");var e=t(this).attr("data-id");t("#profession a").removeClass("active"),e?(t("#profession_content").show(),t("#profession a").hide(),t("#profession a."+e).show(),t("#profession a.both").show().addClass("active")):t("#profession_content").hide(),a.getProfession(1)}}),t("#profession a").on("click",function(s){return t(this).hasClass("active")?void 0:(t(this).addClass("active").siblings().removeClass("active"),void a.getProfession(1))})},getOptions:function(){var a=this;t.get("/majored/getInitInfo.do",function(t){"0000000"===t.rtnCode&&t.bizData.batchType&&a.render(t.bizData.batchType)})},getProfession:function(a){var s=t("#batch a.active").attr("data-id"),e=t("#batch a.active").text();"全部"===e&&(e="");var i=t("#classify a.active").attr("data-id"),o=t("#classify a.active").text();"全部"===o&&(o="");var n=t("#profession a.active"),r="",c="";n[0]&&(r=n.attr("data-id"),c=n.text(),"全部"===c&&(c=""));var h=t("#search").val(),d=this;t.ajax({type:"post",url:"/majored/searchMajored.do",contentType:"application/x-www-form-urlencoded;charset=utf-8",data:{batchTypeId:s,batchTypeName:e,subjectTypeId:i,subjectTypeName:o,majoredTypeId:r,majoredTypeName:c,pageSize:10,pageNo:a,searchName:h},dataType:"json",success:function(t){if("0000000"===t.rtnCode){var s=t.bizData.list;d.renderProfessionList(s),1==a&&d.renderPage(1,t.bizData.count)}},error:function(a){}})},renderProfessionList:function(a){var s=[],e=0,i=a.length;for(s.push('<table border="0" cellpadding="0" cellspacing="0"><thead><tr><th class="name">专业名称</th><th>计划人数</th><th>学制</th><th>外语语种</th><th>收费标准</th><th>开设院校</th></tr></thead><tbody>');i>e;e++){var o=e%2!=0?"active":"";s.push('<tr class="'+o+'"><td class="name"><a href="/consult/profession_detile.jsp?id='+a[e].code+'">'+a[e].name+"</a></td><td>"+a[e].planNumber+"</td><td>"+a[e].schoolLength+"</td><td>"+a[e].foreginLanguage+"</td><td>"+a[e].feeStandard+'</td><td><a href="/consult/school_detile.jsp?id='+a[e].universityCode+'">'+a[e].universityName+"</a></td></tr>")}s.push("</tbody></table>"),t("#profession_list").html(s.join(""))},renderPage:function(a,s){this.totalPage=Math.ceil(s/10);var e=[],i=10*(a-1)+1;e.push('<span class="record">共'+s+'条记录 <span class="startNum">'+i+"</span>/"+s+"</span>"),e.push('<a class="previous-page">上一页</a>');for(var o=0;o<this.totalPage;o++){var n=o+1;a==n?e.push('<a class="active">'+n+"</a>"):e.push("<a>"+n+"</a>")}e.push('<a class="next-page">下一页</a>'),t("#page").html(e.join("")),this.pageEventHandle()},pageEventHandle:function(){var a=this;t("#page a").on("click",function(s){if(!t(this).hasClass("active")&&(t(this).addClass("active").siblings().removeClass("active"),t(this).hasClass("previous-page")?a.curPage--:t(this).hasClass("next-page")?a.curPage++:a.curPage=parseInt(t(this).text()),a.curPage>0&&a.curPage<=a.totalPage)){var e=10*(a.curPage-1)+1;t(".startNum").text(e),a.getProfession(a.curPage)}})},getSearch:function(){this.curPage=1,this.getProfession(1)}};t(document).ready(function(){s.getOptions(),t("#search_button").on("click",function(){var a=t("#search").val();a&&s.getSearch()})})});