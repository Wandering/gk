define(function(a){var e=a("$");a("swiper");var s={curPage:1,totalPage:0,render:function(a){var s=[],t=[],i=[],r=0,o=a.length;for(s.push('<a class="both active">全部</a>'),t.push('<a class="both active">全部</a>'),i.push('<a class="both active">全部</a>');o>r;r++){s.push('<a data-id="'+a[r].id+'">'+a[r].name+"</a>");for(var n=a[r].subjectType,c=0,h=n.length;h>c;c++){t.push('<a class="'+a[r].id+'" data-id="'+n[c].id+'">'+n[c].name+"</a>");for(var l=n[c].majoredType,d=0,g=l.length;g>d;d++)i.push('<a class="'+n[c].id+'" data-id="'+l[d].id+'">'+l[d].name+"</a>")}}e("#batch").html(s.join("")),e("#classify").html(t.join("")),e("#profession").html(i.join("")),this.addEventHandle(),this.getProfession(1)},addEventHandle:function(){var a=this;e("#batch a").on("click",function(s){if(!e(this).hasClass("active")){e(this).addClass("active").siblings().removeClass("active");var t=e(this).attr("data-id");t?e("#classify a."+t).show().siblings().hide():e("#classify a").show(),e("#classify a.both").show().addClass("active").siblings().removeClass("active"),e("#profession_content").hide(),e("#profession a").removeClass("active"),a.getProfession(1)}}),e("#classify a").on("click",function(s){if(!e(this).hasClass("active")){e(this).addClass("active").siblings().removeClass("active");var t=e(this).attr("data-id");e("#profession a").removeClass("active"),t?(e("#profession_content").show(),e("#profession a").hide(),e("#profession a."+t).show(),e("#profession a.both").show().addClass("active")):e("#profession_content").hide(),a.getProfession(1)}}),e("#profession a").on("click",function(s){return e(this).hasClass("active")?void 0:(e(this).addClass("active").siblings().removeClass("active"),void a.getProfession(1))})},getOptions:function(){var a=this;e.get("/majored/getInitInfo.do",function(e){"0000000"===e.rtnCode&&e.bizData.batchType&&a.render(e.bizData.batchType)})},getProfession:function(a){var s=e("#batch a.active").attr("data-id"),t=e("#batch a.active").text();"全部"===t&&(t="");var i=e("#classify a.active").attr("data-id"),r=e("#classify a.active").text();"全部"===r&&(r="");var o=e("#profession a.active"),n="",c="";o[0]&&(n=o.attr("data-id"),c=o.text(),"全部"===c&&(c=""));var h=e("#search").val(),l=this;e.ajax({type:"post",url:"/majored/searchMajored.do",contentType:"application/x-www-form-urlencoded;charset=utf-8",data:{batchTypeId:s,batchTypeName:t,subjectTypeId:i,subjectTypeName:r,majoredTypeId:n,majoredTypeName:c,pageSize:10,pageNo:a,searchName:h},dataType:"json",success:function(s){if("0000000"===s.rtnCode){var t=s.bizData.list;t&&t.length>0?(l.renderProfessionList(t),1==a&&l.renderPage(1,s.bizData.count)):(e("#profession_list").html('<p style="text-align: center">暂无信息！</p>'),e("#page").html(""))}},error:function(a){}})},renderProfessionList:function(a){var s=[],t=0,i=a.length;for(s.push('<table border="0" cellpadding="0" cellspacing="0"><thead><tr><th class="name">专业名称</th><th>计划人数</th><th>学制</th><th>外语语种</th><th>收费标准</th><th>开设院校</th></tr></thead><tbody>');i>t;t++){var r=t%2!=0?"active":"";s.push('<tr class="'+r+'"><td class="name"><a href="/consult/profession_detile.jsp?id='+a[t].code+'">'+a[t].name+"</a></td><td>"+a[t].planNumber+"</td><td>"+a[t].schoolLength+"</td><td>"+a[t].foreginLanguage+"</td><td>"+a[t].feeStandard+'</td><td><a target="_blank" href="/consult/school_detile.jsp?id='+a[t].universityCode+'">'+a[t].universityName+"</a></td></tr>")}s.push("</tbody></table>"),e("#profession_list").html(s.join(""))},renderPage:function(a,s){this.totalPage=Math.ceil(s/10);var t=[],i=10*(a-1)+1;t.push('<span class="record">共'+s+'条记录 <span class="startNum">'+i+"</span>/"+s+"</span>"),t.push('<a class="previous-page">上一页</a>');for(var r=0;r<this.totalPage;r++){var o=r+1;a==o?t.push('<a class="active '+o+'">'+o+"</a>"):t.push('<a class="'+o+'">'+o+"</a>")}num!=this.totalPage&&t.push("<span>...</span>"),t.push('<a class="next-page">下一页</a>'),e("#page").html(t.join("")),this.pageEventHandle()},refreshPageShow:function(a){var e=a+2;e=e>this.totalPage?this.totalPage:e,e=10>e?10:e;for(var s=e,t=[],i=0;10>i;i++)t.push(e--);return t.reverse(),s>10&&(t[0]=1,t[1]=2,t[2]="..."),s<=this.totalPage-2&&t.push("..."),t},refreshPage:function(a){var s=this.refreshPageShow(a),t=[];t.push('<a class="previous-page">上一页</a>');for(var i=0;i<s.length;i++)"string"==typeof s[i]?t.push("<span>...</span>"):t.push('<a class="'+s[i]+'">'+s[i]+"</a>");t.push('<a class="next-page">下一页</a>'),e("#page").html(t.join("")),this.pageEventHandle()},pageEventHandle:function(){var a=this;e("#page a").on("click",function(s){if(e(this).hasClass("previous-page")){if(a.curPage--,a.curPage>0){e("#page a."+a.curPage)[0]||a.refreshPage(a.curPage),e("#page a."+a.curPage).addClass("active").siblings().removeClass("active");var t=10*(a.curPage-1)+1;e(".startNum").text(t),a.getProfession(a.curPage)}}else if(e(this).hasClass("next-page")){if(a.curPage++,a.curPage<=a.totalPage){e("#page a."+a.curPage)[0]||a.refreshPage(a.curPage),e("#page a."+a.curPage).addClass("active").siblings().removeClass("active");var t=10*(a.curPage-1)+1;e(".startNum").text(t),a.getProfession(a.curPage)}}else if(!e(this).hasClass("active")){a.curPage=parseInt(e(this).text()),e(this).addClass("active").siblings().removeClass("active");var i=a.curPage+1,r=a.curPage-1;if((i<=a.totalPage||r>0)&&(e("#page a."+i)[0]&&e("#page a."+r)[0]||(a.refreshPage(a.curPage),e("#page a."+a.curPage).addClass("active"))),a.curPage>0&&a.curPage<=a.totalPage){var t=10*(a.curPage-1)+1;e(".startNum").text(t),a.getProfession(a.curPage)}}})},getSearch:function(){this.curPage=1,this.getProfession(1)}};e(document).ready(function(){s.getOptions(),e("#search_button").on("click",function(){var a=e("#search").val();a&&s.getSearch()})})});