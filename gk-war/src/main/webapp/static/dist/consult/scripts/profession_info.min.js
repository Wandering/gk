define(function(a){var t=a("$");a("swiper");var e={curPage:1,totalPage:0,render:function(a){var e=[],s=[],i=[],o=0,n=a.length;for(e.push('<a class="both active">全部</a>'),s.push('<a class="both active">全部</a>'),i.push('<a class="both active">全部</a>');n>o;o++){e.push('<a data-id="'+a[o].id+'">'+a[o].name+"</a>");for(var r=a[o].subjectType,c=0,h=r.length;h>c;c++){s.push('<a class="'+a[o].id+'" data-id="'+r[c].id+'">'+r[c].name+"</a>");for(var d=r[c].majoredType,l=0,p=d.length;p>l;l++)i.push('<a class="'+r[c].id+'" data-id="'+d[l].id+'">'+d[l].name+"</a>")}}t("#batch").html(e.join("")),t("#classify").html(s.join("")),t("#profession").html(i.join("")),this.addEventHandle(),this.getProfession(1)},addEventHandle:function(){var a=this;t("#batch a").on("click",function(e){if(!t(this).hasClass("active")){t(this).addClass("active").siblings().removeClass("active");var s=t(this).attr("data-id");s?t("#classify a."+s).show().siblings().hide():t("#classify a").show(),t("#classify a.both").show().addClass("active").siblings().removeClass("active"),t("#profession_content").hide(),t("#profession a").removeClass("active"),a.getProfession(1)}}),t("#classify a").on("click",function(e){if(!t(this).hasClass("active")){t(this).addClass("active").siblings().removeClass("active");var s=t(this).attr("data-id");t("#profession a").removeClass("active"),s?(t("#profession_content").show(),t("#profession a").hide(),t("#profession a."+s).show(),t("#profession a.both").show().addClass("active")):t("#profession_content").hide(),a.getProfession(1)}}),t("#profession a").on("click",function(e){return t(this).hasClass("active")?void 0:(t(this).addClass("active").siblings().removeClass("active"),void a.getProfession(1))})},getOptions:function(){var a=this;t.get("/majored/getInitInfo.do",function(t){"0000000"===t.rtnCode&&t.bizData.batchType&&a.render(t.bizData.batchType)})},getProfession:function(a){var e=t("#batch a.active").attr("data-id"),s=t("#batch a.active").text();"全部"===s&&(s="");var i=t("#classify a.active").attr("data-id"),o=t("#classify a.active").text();"全部"===o&&(o="");var n=t("#profession a.active"),r="",c="";n[0]&&(r=n.attr("data-id"),c=n.text(),"全部"===c&&(c=""));var h=t("#search").val(),d=this;t.ajax({type:"post",url:"/majored/searchMajored.do",contentType:"application/x-www-form-urlencoded;charset=utf-8",data:{batchTypeId:e,batchTypeName:s,subjectTypeId:i,subjectTypeName:o,majoredTypeId:r,majoredTypeName:c,pageSize:10,pageNo:a,searchName:h},dataType:"json",success:function(t){if("0000000"===t.rtnCode){var e=t.bizData.subjectList;d.renderProfessionList(e),1==a&&d.renderPage(1,t.bizData.pageCount)}},error:function(a){}})},renderProfessionList:function(a){var e=[],s=0,i=a.length;for(e.push('<table border="0" cellpadding="0" cellspacing="0"><thead><tr><th class="name">专业名称</th><th>计划人数</th><th>学制</th><th>外语语种</th><th>收费标准</th><th>开设院校</th></tr></thead><tbody>');i>s;s++){var o=s%2!=0?"active":"";e.push('<tr class="'+o+'"><td class="name"><a href="/consult/profession_detile.jsp?id='+a[s].code+'">'+a[s].name+"</a></td><td>"+a[s].planNumber+"</td><td>"+a[s].schoolLength+"</td><td>"+a[s].foreginLanguage+"</td><td>"+a[s].feeStandard+'</td><td><a href="/consult/school_detile.jsp?id='+a[s].universityCode+'">'+a[s].universityName+"</a></td></tr>")}e.push("</tbody></table>"),t("#profession_list").html(e.join(""))},renderPage:function(a,e){this.totalPage=Math.ceil(e/10);var s=[],i=10*(a-1)+1;s.push('<span class="record">共'+e+'条记录 <span class="startNum">'+i+"</span>/"+e+"</span>"),s.push('<a class="previous-page">上一页</a>');for(var o=0;o<this.totalPage;o++){var n=o+1;a==n?s.push('<a class="active">'+n+"</a>"):s.push("<a>"+n+"</a>")}s.push('<a class="next-page">下一页</a>'),t("#page").html(s.join("")),this.pageEventHandle()},pageEventHandle:function(){var a=this;t("#page a").on("click",function(e){if(!t(this).hasClass("active")&&(t(this).addClass("active").siblings().removeClass("active"),t(this).hasClass("previous-page")?a.curPage--:t(this).hasClass("next-page")?a.curPage++:a.curPage=parseInt(t(this).text()),a.curPage>0&&a.curPage<=a.totalPage)){var s=10*(a.curPage-1)+1;t(".startNum").text(s),a.getProfession(a.curPage)}})},getSearch:function(){this.curPage=1,this.getProfession(1)}};t(document).ready(function(){e.getOptions(),t("#search_button").on("click",function(){var a=t("#search").val();a&&e.getSearch()})})});