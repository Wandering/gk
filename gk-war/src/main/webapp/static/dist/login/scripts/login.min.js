define(function(t){var r=t("$"),e={tabLogin:r(".tab-login"),tabRegister:r(".tab-register"),registerInput:r(".register-input"),errorTip1:r(".error-tip1"),errorTip2:r(".error-tip2"),loginInput:r(".login-input"),loginAccount:r(".login-account"),loginPassword:r(".login-password"),forgetPsd:r(".forget-psd"),btnLogin:r(".btn-login"),btnLoginRegister:r(".btn-login-register"),telNumber:r(".tel-number"),captchaCode:r(".captcha-code"),codeText:r(".code-text"),regPassword:r(".reg-password"),regPasswordConfirm:r(".reg-password-confirm")};r(function(){e.tabLogin.click(function(){r(this).addClass("active").siblings().removeClass("active"),e.registerInput.hide(),e.loginInput.fadeIn(),e.errorTip1.text(""),e.errorTip2.text("")}),e.btnLogin.click(function(){var t=e.loginAccount.val(),o=e.loginPassword.val();e.errorTip1.text(""),e.errorTip2.text("");var i=/^0?1[3578]\d{9}$/;return""==t.trim()?void e.errorTip1.text("请输入账号").fadeIn():i.test(t.trim())?""==o.trim()?void e.errorTip1.text("密码不能为空").fadeIn():o.trim().length<6||t.trim().length>16?(e.errorTip1.text("密码输入有误").fadeIn(),!1):(e.errorTip1.text(""),void r.ajax({url:"/login/login.do",type:"post",dataType:"json",data:{account:t,password:o},success:function(t){console.log(t),"0000000"==t.rtnCode?window.location.assign("http://"+window.location.host+"/index.jsp"):e.errorTip1.text(t.msg)}})):void e.errorTip1.text("账号输入有误").fadeIn()}),e.tabRegister.click(function(){r(this).addClass("active").siblings().removeClass("active"),e.registerInput.fadeIn(),e.loginInput.hide()}),e.codeText.click(function(){e.errorTip2.text("");var t=e.telNumber.val().trim(),o=/^0?1[3578]\d{9}$/;return""==t.trim()?void e.errorTip2.text("手机号不能为空").fadeIn():o.test(t.trim())?void r.ajax({url:"/register/confirmAccount.do",type:"post",dataType:"json",data:{type:0,account:t},success:function(o){"0000000"!==o.rtnCode?e.errorTip2.text(o.msg).fadeIn():r.ajax({url:"/captcha/captcha.do",type:"post",dataType:"json",data:{account:t,type:0},success:function(t){if("0000000"==t.rtnCode){e.codeText.unbind("click").css("background-color","#ccc");var r=JSON.parse(t.bizData).time,o=setInterval(function(){r--,e.codeText.text(r+"秒后可重新获取"),0>=r&&(clearInterval(o),e.codeText.text("重新获取").css("background-color","#52d09c"))},1e3);e.codeText.bind("click")}}})}}):void e.errorTip2.text("手机号输入有误").fadeIn()}),e.btnLoginRegister.click(function(){var t=e.captchaCode.val().trim(),o=e.regPassword.val().trim(),i=e.regPasswordConfirm.val().trim(),n=e.telNumber.val().trim(),a=/^0?1[3578]\d{9}$/;return""==n.trim()?void e.errorTip2.text("手机号不能为空").fadeIn():a.test(n.trim())?""==t.trim()?void e.errorTip2.text("验证码不能为空").fadeIn():t.trim().length>6?void e.errorTip2.text("验证码输入有误").fadeIn():""==o.trim()||""==i.trim()?void e.errorTip2.text("密码不能为空").fadeIn():o.trim()!=i.trim()?void e.errorTip2.text("两次密码输入不一致").fadeIn():(e.errorTip2.text(""),void r.ajax({url:"/register/account.do",type:"post",dataType:"json",data:{account:n,captcha:t,password:o},success:function(t){console.log(t),"0000000"==t.rtnCode?window.location.href="http://"+window.location.host+"/login/login.jsp":e.errorTip2(t.msg)}})):void e.errorTip2.text("手机号输入有误").fadeIn()})})});