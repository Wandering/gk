define(function(t){function e(t){var e=new RegExp("(^|\\?|&)"+t+"=([^&]*)(\\s|&|$)","i");return e.test(window.location.href)?unescape(RegExp.$2.replace(/\+/g," ")):""}var a=t("$");t("backToTop");var n={getProfessionInfo:function(t){var e=this;a.ajax({type:"get",url:"/majored/getMajoredInfo.do",contentType:"application/x-www-form-urlencoded;charset=utf-8",data:{code:t},dataType:"json",success:function(t){"0000000"===t.rtnCode&&e.renderInfo(t.bizData)},error:function(t){}})},renderInfo:function(t){a("#info_content").html('<img class="fl" src="'+(t.universityImage||"http://cdn.gaokao360.net/static/global/common/images/kqbk_banner_default.png")+'" /><div class="info"><ul><li class="school-name">'+t.name+"</li><li>学历层次："+t.educationLevel+"</li><li>学科门类："+t.subjectType+"</li><li>专业分类："+t.majoredType+"</li><li>授予学位："+t.degree+"</li></ul></div>")},getReationInfo:function(t){var e=this;a.ajax({type:"get",url:"/majored/getMajoredDetail.do",contentType:"application/x-www-form-urlencoded;charset=utf-8",data:{code:t},dataType:"json",success:function(t){"0000000"===t.rtnCode&&(e.renderReation(t.bizData),a("#tab_0").show(),e.addEventHandleTab())},error:function(t){}})},addEventHandleTab:function(){a(".tabs-list").on("click","li",function(t){a(this).hasClass("active")||(a(this).addClass("active").siblings().removeClass("active"),a("#tab_"+a(this).index()).show().siblings().hide())})},renderList:function(t){var e=[];return e.push("<ul>"),a.each(t,function(t,a){e.push("<li>"+a+"</li>")}),e.push("</ul>"),e.join("")},renderReation:function(t){console.log(t.mainCourse);var e=t.similarMajor?t.similarMajor.split("丨"):[],n='<p class="article">暂无信息！</p>',i=t.mainCourse?t.mainCourse.split("丨"):"";a("#tab_0").html(this.renderList(e)||n),i.length>0?a("#tab_1").html(this.renderList(i)):a("#tab_1").html(n),a("#tab_2").html('<p class="article">'+(t.workGuide||"暂无信息！")+"</p>");for(var o=t.openUniversity,r='<div class="tipTxt"><strong>温馨提示：</strong> <i class="star"></i>号表示该专业在该院校招生</div><table class="table" id="openUniversity-table"><thead><tr><th>开设院校</th><th>计划人数</th><th>学制</th><th>外语语种</th><th>收费标准</th></tr></thead><tbody>',s=0,l=o.length;l>s;s++){var d=o[s].isOpen,c="";c=0==d?"":'<i class="star"></i>',r+="<tr><td>"+c+(o[s].universityName||"-")+"</td><td>"+(o[s].enrollNumber||"-")+"</td><td>"+(o[s].type||"-")+"</td><td>"+(o[s].foreignLanguage||"-")+"</td><td>"+(o[s].feeStandard||"-")+"</td></tr>"}r+="</tbody></table>",a("#tab_3").html(r)}};a(document).ready(function(){var t=e("id");n.getProfessionInfo(t),n.getReationInfo(t)})});