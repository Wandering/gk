define(function(t){function e(){var t=n.loginAccount.val(),e=n.loginPassword.val();n.errorTip1.text(""),n.errorTip2.text("");var r=/^0?1[3578]\d{9}$/;return""==i.trim(t)?void n.errorTip1.text("请输入账号").fadeIn():r.test(i.trim(t))?""==i.trim(e)?void n.errorTip1.text("密码不能为空").fadeIn():i.trim(e).length<6||i.trim(e).length>16||isNaN(i.trim(e))?(n.errorTip1.text("密码输入有误").fadeIn(),console.log("长度："+i.trim(e).length+"----"+!isNaN(i.trim(e))),!1):(n.errorTip1.text(""),void i.ajax({url:"/login/login.do",type:"post",dataType:"json",data:{account:t,password:e},success:function(t){console.log(t),"0000000"==t.rtnCode?window.location.assign("http://"+window.location.host+"/index.jsp"):n.errorTip1.text(t.msg)}})):void n.errorTip1.text("账号输入有误").fadeIn()}function r(){n.errorTip2.text("");var t=n.telNumber.val().trim(),e=/^0?1[3578]\d{9}$/;return""==t.trim()?void n.errorTip2.text("手机号不能为空").fadeIn():e.test(t.trim())?void i.ajax({url:"/register/confirmAccount.do",type:"post",dataType:"json",data:{type:0,account:t},success:function(e){"0000000"!==e.rtnCode?n.errorTip2.text(e.msg).fadeIn():i.ajax({url:"/captcha/captcha.do",type:"post",dataType:"json",data:{account:t,type:0},success:function(t){if("0000000"==t.rtnCode){n.codeText.css("background-color","#ccc").attr("disabled",!0);var e=JSON.parse(t.bizData).time,r=setInterval(function(){e--,n.codeText.text(e+"秒后可重新获取"),0>=e&&(clearInterval(r),n.codeText.text("重新获取").css("background-color","#52d09c"),n.codeText.attr("disabled",!1))},1e3)}else n.errorTip2.text(t.msg).fadeIn()}})}}):void n.errorTip2.text("手机号输入有误").fadeIn()}function o(){var t=n.captchaCode.val().trim(),e=n.regPassword.val().trim(),r=n.regPasswordConfirm.val().trim(),o=n.telNumber.val().trim(),a=/^0?1[3578]\d{9}$/;return""==o.trim()?void n.errorTip2.text("手机号不能为空").fadeIn():a.test(o.trim())?""==t.trim()?void n.errorTip2.text("验证码不能为空").fadeIn():t.trim().length>6?void n.errorTip2.text("验证码输入有误").fadeIn():""==e.trim()||""==r.trim()?void n.errorTip2.text("密码不能为空").fadeIn():e.trim().length<6||e.trim().length>16||isNaN(e.trim())?void n.errorTip2.text("密码不能小于6位大于16位，且只能为数字").fadeIn():e.trim()!=r.trim()?void n.errorTip2.text("两次密码输入不一致").fadeIn():(n.errorTip2.text(""),void i.ajax({url:"/register/account.do",type:"post",dataType:"json",data:{account:o,captcha:t,password:e},success:function(t){console.log(t),"0000000"==t.rtnCode?window.location.assign("http://"+window.location.host+"/user/personal-info.jsp"):n.errorTip2.text(t.msg)}})):void n.errorTip2.text("手机号输入有误").fadeIn()}var i=t("$"),n={tabLogin:i(".tab-login"),tabRegister:i(".tab-register"),registerInput:i(".register-input"),errorTip1:i(".error-tip1"),errorTip2:i(".error-tip2"),loginInput:i(".login-input"),loginAccount:i(".login-account"),loginPassword:i(".login-password"),forgetPsd:i(".forget-psd"),btnLogin:i(".btn-login"),btnLoginRegister:i(".btn-login-register"),telNumber:i(".tel-number"),captchaCode:i(".captcha-code"),codeText:i(".code-text"),regPassword:i(".reg-password"),regPasswordConfirm:i(".reg-password-confirm")};i(function(){n.tabLogin.click(function(){i(this).addClass("active").siblings().removeClass("active"),n.registerInput.hide(),n.loginInput.fadeIn(),n.errorTip1.text(""),n.errorTip2.text("")}),n.tabRegister.click(function(){i(this).addClass("active").siblings().removeClass("active"),n.registerInput.fadeIn(),n.loginInput.hide()}),n.btnLogin.click(function(){e()}),n.loginPassword.keydown(function(){13==event.keyCode&&e()}),n.codeText.click(function(){r()}),n.btnLoginRegister.click(function(){o()}),n.regPasswordConfirm.keydown(function(){13==event.keyCode&&o()})})});