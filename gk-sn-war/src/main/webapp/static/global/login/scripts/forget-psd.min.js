define(function(t){var e=t("$");e(function(){function t(){var t=e(".tel").val(),r=e(".code").val(),o=e(".new-psd").val(),i=e(".confirm-psd").val(),n=/^0?1[3578]\d{9}$/;return""==t.trim()?void e(".error-tip2").text("手机号不能为空").fadeIn():n.test(t.trim())?""==r.trim()?void e(".error-tip2").text("验证码不能为空").fadeIn():r.trim().length>6?void e(".error-tip2").text("验证码输入有误").fadeIn():""==o.trim()||""==i.trim()?void e(".error-tip2").text("密码不能为空").fadeIn():o.trim().length<6||o.trim().length>16||isNaN(o.trim())?void e(".error-tip2").text("密码不能小于6位大于16位，且只能为数字").fadeIn():o.trim().length<6||o.trim().length>16||isNaN(o.trim())?void e(".error-tip2").text("密码不能小于6位大于16位，且只能为数字").fadeIn():o.trim()!=i.trim()?void e(".error-tip2").text("两次密码输入不一致").fadeIn():(e(".error-tip2").text(""),void e.ajax({url:"/register/retrievePassword.do",type:"post",dataType:"json",data:{account:t,captcha:r,password:o},success:function(t){"0000000"==t.rtnCode?(console.log(t),window.location.href="http://"+window.location.host+"/login/login.jsp"):e(".error-tip2").text(t.msg)}})):void e(".error-tip2").text("手机号输入有误").fadeIn()}e(".code-text").click(function(){var t=e(".tel").val().trim(),r=/^0?1[3578]\d{9}$/;return""==t.trim()?void e(".error-tip2").text("手机号不能为空").fadeIn():r.test(t.trim())?void e.ajax({url:"/register/confirmAccount.do",type:"post",dataType:"json",data:{type:1,account:t},success:function(r){"0000000"==r.rtnCode?e.ajax({url:"/captcha/captcha.do",type:"post",dataType:"json",data:{account:t,type:1},success:function(t){if("0000000"==t.rtnCode){e(".code-text").css("background-color","#ccc").attr("disabled",!0);var r=JSON.parse(t.bizData).time,o=setInterval(function(){r--,e(".code-text").text(r+"秒后可重新获取"),0>=r&&(clearInterval(o),e(".code-text").text("重新获取").css("background-color","#52d09c"),e(".code-text").attr("disabled",!1))},1e3)}else e(".errorTip2").text(t.msg).fadeIn()}}):e(".error-tip2").text(r.msg).fadeIn()}}):void e(".error-tip2").text("手机号输入有误").fadeIn()}),e(".btn-login").click(function(){t()}),e(".confirm-psd").keydown(function(){13==event.keyCode&&t()})})});