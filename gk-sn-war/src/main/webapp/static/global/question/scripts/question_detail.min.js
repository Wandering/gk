define(function(e){function t(e){var t=new RegExp("(^|\\?|&)"+e+"=([^&]*)(\\s|&|$)","i");return t.test(window.location.href)?unescape(RegExp.$2.replace(/\+/g," ")):""}var s=e("$");console.log(22);var n={renderAsk:function(e){var t=[],n=e.question;if(n){t.push('<section class="ask-answer mt20">'),t.push('<div class="ask mt20">'),t.push('<div class="head-img">'),t.push('<img src="'+(n.userIcon||"http://cdn.gaokao360.net/static/global/common/images/user_default.png")+'" />'),t.push("</div>"),t.push('<div class="head-info">'),t.push("<h6>来自 "+(n.userName||"")+new Date(n.createTime).Format("yyyy-MM-dd hh:mm")+"</h6>");for(var i=n.questions,a=[],o=[],u=0,r=i.length;r>u;u++)a.push(i[u].text),i[u].img&&o.push('<img src="'+i[u].img+'" />');t.push("<h3>"+a.join("")+"</h3>"),t.push("<p>"+o.join("")+"</hp>"),t.push("</div></div>")}var h=e.answer;h&&h.answers&&h.answers.length>0&&t.push(this.renderAnswer(h)),t.push("</section>"),s("#section_article").html(t.join(""))},renderList:function(e,t){for(var n=[],i=0,a=t.length;a>i;i++){var o=t[i].question,u=[];if(o)for(var r=o.questions,h=0,d=r.length;d>h;h++)r[h].text&&u.push(r[h].text);u.length>0&&n.push('<li><a target="_blank" href="/question/question_detail.jsp?id='+o.questionId+'">'+u.join("")+"</a></li>")}s("#"+e).html(n.join(""))},renderAnswer:function(e){var t=[];t.push('<ul class="answer-list">'),t.push("<li>"),t.push('<div class="left">'),t.push('<div class="head-img">'),t.push('<img src="'+(e.userIcon||"http://cdn.gaokao360.net/static/global/common/images/user_default.png")+'" />'),t.push('<i class="star"></i>'),t.push("</div>"),t.push("<span>"+(e.userName||"")+"</span>"),t.push("</div>");for(var s=e.answers,n=[],i=0,a=s.length;a>i;i++)s[i].text&&n.push("<p>"+s[i].text+"</p>"),s[i].img&&n.push('<p><img src="'+s[i].img+'" /></p>');return t.push('<div class="right">'+n.join("")+"</div>"),t.push("</li></ul>"),t.join("")},get:function(e){var t=this;s.get("/question/questionDetail.do?id="+e,function(e){"0000000"===e.rtnCode&&t.renderAsk(e.bizData)})},getNew:function(){var e=this;s.get("/question/newQuestion.do?startSize=0&endSize=5",function(t){"0000000"===t.rtnCode&&e.renderList("new",t.bizData)})},getHot:function(){var e=this;s.get("/question/hotQuestion.do?startSize=0&endSize=5",function(t){"0000000"===t.rtnCode&&e.renderList("hot",t.bizData)})},updateReadNum:function(e){s.ajax({type:"post",url:"/question/updateBrowseNum.do",contentType:"application/x-www-form-urlencoded;charset=utf-8",data:{id:e},dataType:"json",success:function(e){},error:function(e){}})}};s(document).ready(function(){var e=t("id");n.get(e),n.updateReadNum(e),n.getNew(),n.getHot()})});