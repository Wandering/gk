define(function(e){function a(e){n(".error-tips").text(e).fadeIn(1e3).fadeOut(1e3)}function t(){n.getJSON("/before/video/getSubjectList.do",function(e){if("0000000"==e.rtnCode){for(var a=e.bizData,t=0;t<a.length;t++){var o=a[t].subjectName,r=a[t].subjectId;console.log(o);var s='<li id="'+r+'">'+o+"</li>";n(".subjectList").append(s)}n(".subjectList").find("li:eq(0)").click()}})}function o(e,a,t){n(e).html("").hide(),n.getJSON("/before/video/getVideoList.do",{pageNo:0,pageSize:4,classifyType:t,sortType:1,subjectId:a},function(a){if("0800001"==a.rtnCode&&n(e).append(s("暂时没有数据，请耐心等待哦")).fadeIn(500),"0000000"==a.rtnCode)for(var o=a.bizData,r=0;r<o.length;r++){var c=o[r].subjectName||"",i=o[r].teacherName||"",l=o[r].courseId,d=o[r].hit,p=o[r].subcontent,m="/before/teacher-lecture-play.jsp?classifyType="+t+"&courseId="+l,u="";u=null==o[r].frontCover||""==o[r].frontCover?"http://cdn.gaokao360.net/static/global/common/images/video-default.png":o[r].frontCover;var f=p;f.length>150&&(f=f.substring(0,150)+"...");var y='<li class="item"><div class="img"><img src="'+u+'" alt=""/></div><div class="info"><span class="fl">学科名称:'+c+'</span><span class="fr">主讲专家:'+i+'</span></div><div class="num"><span class="fl">点击量:'+d+'</span></div><p class="txt">'+f+'</p><div class="funs"><a target="_blank" href="'+m+'" class="btn">点击播放</a></div></li>';n(e).append(y).fadeIn(500)}})}function r(e,a,t){n(e).html("").hide(),n.getJSON("/before/paper/getPaperList.do",{pageNo:0,pageSize:8,years:"2014",sortType:1,subjectId:a},function(a){if("0800001"==a.rtnCode&&n(e).append(s("暂时没有数据，请耐心等待哦")).fadeIn(500),"0000000"==a.rtnCode)for(var o=a.bizData,r=0;r<o.length;r++){var c=o[r].paperName,i=o[r].createDate,d=o[r].resources,p=new Date(i).Format("yyyy-MM-dd"),m='<li class="item"><a target="_blank" href="'+l+d+'"><span class="subject-n"><strong>'+t+'</strong></span><span class="subject-t">'+c+'</span><span class="subject-d">上传时间：'+p+"</span></a></li>";n(e).append(m).fadeIn(500)}})}var n=e("$");e("backToTop");var s=e("pageErrorTip"),c={$tabsList:n(".tabs-list"),$evaluatingSub:n("#evaluating-sub")},i=/^[0-9]*[1-9][0-9]*$/;c.$tabsList.on("click","li",function(){n(this).addClass("active").siblings().removeClass("active");var e=n(this).attr("id"),a=n(this).parent().attr("classifyType"),t=n(this).text();"1"==a&&o("#teacher-lecture-main",e,1),"2"==a&&o("#mentality-main",e,2),"3"==a&&r("#exam-main",e,t)});var l="http://www.gkzy114.com";t(),n("#teacher-lecture-search-btn").on("click",function(){var e=n("#teacher-lecture-search-input").val();window.open("/before/teacher-lecture.jsp?classifyType=1&searchV="+e)}),n("#exam-search-btn").on("click",function(){var e=n("#exam-search-input").val();window.open("/before/exam.jsp?searchV="+e)}),n("#mentality-search-btn").on("click",function(){var e=n("#mentality-search-input").val();window.open("/before/mentality.jsp?classifyType=2&searchV="+e)}),n("#main-volunteer-tabs").on("click","li",function(){n(this).addClass("active").siblings().removeClass("active");var e=n(this).index();n(".main-volunteer-box:eq("+e+")").show().siblings(".main-volunteer-box").hide()}),n(".evaluating-layer").on("click",".close-btn",function(){n(".tansLayer,.evaluating-layer").hide()}),n("#volunteer-flow, #volunteer-flow1").on("click",function(){n("#main-volunteer-tabs li").eq(1).click(),n("html,body").animate({scrollTop:n("#main-volunteer-box").offset().top},800)});var d=window.location.search,p=d.substr(14,1);"4"==p&&(n("#main-volunteer-tabs li").eq(1).click(),n("html,body").animate({scrollTop:n("#main-volunteer-box").offset().top},800)),n("#college-yzm").on("click",function(){n("#college-yzm").attr("src","/verifyCode/randomVerifyCode.do?type=1&code="+Math.random())}).attr("src","/verifyCode/randomVerifyCode.do?type=1"),n("#yxtj-sub").on("click",function(){var e=n("#score-input").val().trim(),t=n('input[name="batch"]:checked').val(),o=n('input[name="subjectType"]:checked').val(),r=n("#yzmCollege").val().trim();return""==e?(a("请输入分数"),!1):0==i.test(e)||3!=e.length?(a("请输入3位数字分数"),!1):void 0==t?(a("请选择批次"),!1):void 0==o?(a("请选择文理科"),!1):""==r?(a("请填写验证码"),!1):void n.ajax({url:"/before/collegeRecommend/getCollegeList.do",type:"GET",dataType:"JSON",data:{m_aggregateScore:e,m_batch:t,m_kelei:o,code:r},success:function(r){if(console.log(r),"0100006"==r.rtnCode||"1000004"==r.rtnCode||"0100005"==r.rtnCode)return a(r.msg),!1;if("0000000"==r.rtnCode){n(".school-list").html(""),n("#volunteer-flow3-layer,.tansLayer").show(),n("#volunteer-flow3-layer .no-school").hide(),n("#score-num").text(e+"分"),n("#batchV").text(t),n("#subjectTypeV").text(o);var s=n.parseJSON(r.bizData),c=s.result.data;if(!c)return a(r.msg),!1;for(var i=0;i<c.length;i++)if(0==c[i].status)n("#no-school"+i).show();else for(var l=c[i].data,d=0;d<l.length;d++){var p=l[d].m_university_code,m=l[d].m_university_name,u='<div><a target="_blank" href="/consult/school_detail.jsp?id='+p+'">'+m+"</a></div>";n("#school-list"+i).append(u).show()}}}})}),n("#volunteer-flow3-layer").on("click",".close-btn",function(){n("#volunteer-flow3-layer,.tansLayer").hide(),n("#college-yzm").attr("src","/verifyCode/randomVerifyCode.do?type=1&code="+Math.random())}),n("#dreanSchoolBtn").on("click",function(){n("#volunteer-flow3-layer,.tansLayer").hide(),n("#college-yzm").attr("src","/verifyCode/randomVerifyCode.do?type=1&code="+Math.random()),n("#main-volunteer-tabs li:eq(0)").click()}),n("#yzmDreamSchool").on("click",function(){n("#yzmDreamSchool").attr("src","/verifyCode/randomVerifyCode.do?type=2&code="+Math.random())}).attr("src","/verifyCode/randomVerifyCode.do?type=2"),c.$evaluatingSub.on("click",function(){var e=n("#dream-score-input").val().trim(),t=n("#dream-school-input").val().trim(),o=n('input[name="dreamSubjectType"]:checked').val(),r=n("#yzmDream").val();return""==e?(a("请输入分数"),!1):0==i.test(e)||3!=e.length?(a("请输入3位数字分数"),!1):""==t?(a("请输入院校"),!1):t.length>50?(a("院校名称最多50个字"),!1):void 0==o?(a("请选择文理科"),!1):""==r?(a("请填写验证码"),!1):void n.ajax({url:"/appraisal/schoolTest.do",type:"GET",dataType:"JSON",data:{m_aggregateScore:e,m_university_name:t,m_kelei:o,code:r},success:function(r){if("1000006"==r.rtnCode||"1000004"==r.rtnCode)return a(r.msg),!1;var s=n.parseJSON(r.bizData);if(console.log(s),!s)return a(r.msg),!1;if("0000000"==r.rtnCode){if(n("#dream-list").html(""),0==s.data.length)return a("暂无数据,请检查输入信息"),!1;n("#dream-school-layer,.tansLayer").show(),n("#dreamScoreInfo").text(e),n("#dreamSubjectTypeInfo").text(o),n("#dreamSchoolInfo").text(t);var c=s.data.m_averageScores,i=s.data.m_batch,l=s.data.m_lowestScore;console.log(c+"="+i+"="+l);var d='<ul><li class="pc">'+i+'</li><li class="result1"><span class="t">所需最低分数</span><span class="num"><strong>'+l+'</strong>分</span></li><li class="result2"><span class="t">所需平均分数</span><span class="num"><strong>'+c+"</strong>分</span></li></ul>";n("#dream-list").append(d)}}})}),n("#dream-school-layer").on("click",".close-btn",function(){n("#dream-school-layer,.tansLayer").hide(),n("#yzmDreamSchool").attr("src","/verifyCode/randomVerifyCode.do?type=2&code="+Math.random())}),n("#precedence-yzmDreamSchool").on("click",function(){n("#precedence-yzmDreamSchool").attr("src","/verifyCode/randomVerifyCode.do?type=3&code="+Math.random())}).attr("src","/verifyCode/randomVerifyCode.do?type=3"),n("#precedence-sub").on("click",function(e){var t=n("#precedence-score-input").val().trim(),o=n("#precedence-yzmDream").val();return""==t?(a("请输入分数"),!1):0==i.test(t)||3!=t.length?(a("请输入3位数字分数"),!1):""==o?(n(".error-tips").text("请填写验证码").fadeIn(1e3).fadeOut(1e3),!1):void n.ajax({url:"/appraisal/findRanking.do",type:"GET",dataType:"JSON",data:{m_aggregateScore:t,code:o},success:function(e){if("1000006"==e.rtnCode||"1000004"==e.rtnCode)return void n(".error-tips").text(e.msg).fadeIn(1e3).fadeOut(1e3);var a=n.parseJSON(e.bizData);if(!a)return void n(".error-tips").text(e.msg).fadeIn(1e3).fadeOut(1e3);if("0000000"==e.rtnCode){n("#precedence-list").html(""),n("#precedence-school-layer,.tansLayer").show(),n("#precedenceScoreInfo").text(t),n("#current-year").text(a.m_years);var o='<ul><li class="result1"><span class="t">文史类</span><span class="num"><b>'+(a.m_ws_ranking||"")+'</b>位</span></li><li class="result2"><span class="t">理工类</span><span class="num"><b>'+(a.m_lg_ranking||"")+"</b>位</span></li></ul>";n("#precedence-list").append(o),n("#confirm").on("click",function(e){n("#precedence-school-layer,.tansLayer").hide(),n("#precedence-yzmDreamSchool").attr("src","/verifyCode/randomVerifyCode.do?type=3&code="+Math.random())})}}})}),n("#precedence-school-layer").on("click",".close-btn",function(){n("#precedence-school-layer,.tansLayer").hide(),n("#precedence-yzmDreamSchool").attr("src","/verifyCode/randomVerifyCode.do?type=3&code="+Math.random())})});