define(function(e){function t(){s.getJSON("/before/video/getSubjectList.do",function(e){if("0000000"==e.rtnCode)for(var t=e.bizData,a=0;a<t.length;a++){var n=t[a].subjectName,o=t[a].subjectId,i='<option value="'+o+'" data="'+n+'">'+n+"</option>";s(".subjectList").append(i)}})}function a(e,t,a,o,i){s.getJSON("/before/video/getVideoList.do",{pageNo:e,pageSize:t,classifyType:1,sortType:a,subjectId:o,searchName:i},function(a){if(console.log(a),"0800001"==a.rtnCode&&(n.$listMsgItem.append('<p class="noContent">'+a.msg+"</p>"),n.$nextPage.hide()),"0000000"==a.rtnCode){var s=a.bizData;console.log(s.length),s.length>0&&n.$nextPage.show();for(var o=0;o<s.length;o++){var i=s[o].title,c=s[o].teacherName,r=s[o].hit,g=s[o].subcontent,d=s[o].courseId,f="/before/teacher-lecture-play.jsp?classifyType="+l+"&courseId="+d,p="";p=null==s[o].frontCover||""==s[o].frontCover?"/static/dist/common/images/video-default.png":s[o].frontCover;var u=g;u.length>150&&(u=u.substring(0,150)+"...");var v='<li class="item"><div class="img"><img src="'+p+'" alt=""/></div><div class="info"><span class="fl">课程名称:'+i+'</span><span class="fr">主讲专家:'+c+'</span></div><div class="num"><span class="fl">点击量:'+r+'</span></div><p class="txt">'+u+'</p><div class="funs"><a target="_blank" href="'+f+'" class="btn">点击播放</a></div></li>';n.$listMsgItem.append(v)}e++,n.$listMsgItem.attr("pageNo",e),s.length<t&&n.$nextPage.hide()}})}var s=e("$"),n={$listMsgItem:s("#list-msg-item"),$nextPage:s("#nextPage")},o=4,i=decodeURIComponent(window.location.search),l=i.substr(14,1),c=i.indexOf("&"),r=i.substr(c+9);console.log(l),console.log(r),s("#searchVal").val(r),s("#search-btn").on("click",function(){window.location.href="/before/teacher-lecture.jsp?classifyType=1&searchV="+encodeURIComponent(s("#searchVal").val())}),t();var g=s("#searchVal").val();n.$nextPage.on("click",function(){var e=n.$listMsgItem.attr("pageNo"),t=s(".subject-fun").find("option:checked").val();a(e,o,t,"",g)}).click(),s(".subjectList").change(function(){var e=s(this).find("option:selected").attr("value"),t=s(".subject-fun").find("option:selected").attr("value");n.$listMsgItem.attr("pageNo",0);var i=n.$listMsgItem.attr("pageNo");n.$listMsgItem.html(""),a(i,o,t,e,""),s("#searchVal").val("")}),s(".subject-fun").change(function(){var e=s(this).find("option:selected").attr("value"),t=s(".subjectList").find("option:selected").attr("value");n.$listMsgItem.attr("pageNo",0);var i=n.$listMsgItem.attr("pageNo");n.$listMsgItem.html(""),a(i,o,e,t,""),s("#searchVal").val("")})});