define(function(e){function a(){n.getJSON("/before/video/getSubjectList.do",function(e){if("0000000"==e.rtnCode)for(var a=e.bizData,t=0;t<a.length;t++){var s=a[t].subjectName,o=a[t].subjectId,c='<option value="'+o+'">'+s+"</option>";n(".subjectList").append(c)}})}function t(){n.ajax({url:"/vip/getAccount.do",type:"GET",dataType:"JSON",success:function(e){if("0000000"==e.rtnCode){var a=e.bizData.vipStatus;0==a&&n(".years-fun").append('<option value="2014">2014年</option><option value="2013">2013年</option>'),1==a&&n(".years-fun").append('<option value="2015">2015年(vip用户专享)</option><option value="2014">2014年</option><option value="2013">2013年</option>')}}})}function s(e,a,t,s,i){n.getJSON("/before/paper/getPaperList.do",{pageNo:e,pageSize:a,sortType:1,years:s,subjectId:t,searchName:i},function(t){if(console.log(t),("0800001"==t.rtnCode||"1000004"==t.rtnCode)&&(o.$listMsgItem.append('<p class="noContent">'+t.msg+"</p>"),o.$nextPage.hide()),"0000000"==t.rtnCode){var s=t.bizData;s.length>0&&o.$nextPage.show();for(var n=0;n<s.length;n++){var i=s[n].paperName,r=s[n].createDate,l=s[n].subjectId,p=s[n].resources,u="";switch(l){case 1:u="语文";break;case 2:u="数学";break;case 3:u="英语";break;case 10:u="理综";break;case 11:u="文综";break;case 13:u="其他";break;case 15:u="英语";break;case 17:u="数学";break;case 18:u="语文";break;case 23:u="语文";break;case 24:u="数学";break;case 25:u="英语";break;case 32:u="理综";break;case 33:u="文综";break;case 34:u="理综";break;case 35:u="文综";break;default:u="其他"}var g=new Date(r).Format("yyyy-MM-dd"),d='<li class="item"><a target="_blank" href="/before/exam-play.jsp?url='+c+p+'"><span class="subject-n"><strong>'+u+'</strong></span><span class="subject-t">'+i+'</span><span class="subject-d">上传时间：'+g+"</span></a></li>";o.$listMsgItem.append(d)}e++,o.$listMsgItem.attr("pageNo",e),s.length<a&&o.$nextPage.hide()}})}var n=e("$"),o={$listMsgItem:n("#list-msg-item"),$nextPage:n("#nextPage")},c="http://www.gkzy114.com",i=decodeURIComponent(window.location.search),r=(i.substr(14,1),i.indexOf("&")),l=i.substr(r+9);n("#searchVal").val(l),n("#search-btn").on("click",function(){window.location.href="/before/exam.jsp?classifyType=3&searchV="+n("#searchVal").val()}),a(),t();var p=8,u=n("#searchVal").val();o.$nextPage.on("click",function(){var e=o.$listMsgItem.attr("pageNo"),a=n(".subjectList").find("option:checked").val();console.log(a),n.ajax({url:"/vip/getAccount.do",type:"GET",dataType:"JSON",success:function(t){if(console.log(t),"1000004"==t.rtnCode&&(o.$listMsgItem.append('<p class="noContent">'+t.msg+"</p>"),o.$nextPage.hide()),"0000000"==t.rtnCode){var n=t.bizData.vipStatus;0==n&&s(e,p,a,"2014",u),1==n&&s(e,p,a,"2015",u)}}})}).click(),n(".subjectList").change(function(){var e=n(this).find("option:selected").attr("value"),a=n(".years-fun").find("option:selected").attr("value");o.$listMsgItem.attr("pageNo",0);var t=o.$listMsgItem.attr("pageNo");o.$listMsgItem.html(""),s(t,p,e,a,""),n("#searchVal").val("")}),n(".years-fun").change(function(){var e=n(this).find("option:selected").attr("value"),a=n(".subjectList").find("option:selected").attr("value");o.$listMsgItem.attr("pageNo",0);var t=o.$listMsgItem.attr("pageNo");o.$listMsgItem.html(""),s(t,p,a,e,""),n("#searchVal").val("")})});