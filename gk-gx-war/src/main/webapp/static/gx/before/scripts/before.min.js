define(function(e){function a(e){r(".error-tips").text(e).fadeIn(1e3).fadeOut(1e3)}function t(){r.getJSON("/before/video/getSubjectList.do",function(e){if("0000000"==e.rtnCode){for(var a=e.bizData,t=0;t<a.length;t++){var o=a[t].subjectName,n=a[t].subjectId;console.log(o);var s='<li id="'+n+'">'+o+"</li>";r(".subjectList").append(s)}r(".subjectList").find("li:eq(0)").click()}})}function o(e,a,t){r(e).html("").hide(),r.getJSON("/before/video/getVideoList.do",{pageNo:0,pageSize:4,classifyType:t,sortType:1,subjectId:a},function(a){if("0800001"==a.rtnCode&&r(e).append(s("暂时没有数据，请耐心等待哦")).fadeIn(500),"0000000"==a.rtnCode)for(var o=a.bizData,n=0;n<o.length;n++){var l=o[n].subjectName||"",c=o[n].teacherName||"",i=o[n].courseId,d=o[n].hit,p=o[n].subcontent,m="/before/teacher-lecture-play.jsp?classifyType="+t+"&courseId="+i,u="";u=null==o[n].frontCover||""==o[n].frontCover?"http://cdn.gaokao360.net/static/global/common/images/video-default.png":o[n].frontCover;var f=p;f.length>150&&(f=f.substring(0,150)+"...");var y='<li class="item"><div class="img"><img src="'+u+'" alt=""/></div><div class="info"><span class="fl">学科名称:'+l+'</span><span class="fr">主讲专家:'+c+'</span></div><div class="num"><span class="fl">点击量:'+d+'</span></div><p class="txt">'+f+'</p><div class="funs"><a target="_blank" href="'+m+'" class="btn">点击播放</a></div></li>';r(e).append(y).fadeIn(500)}})}function n(e,a,t){r(e).html("").hide(),r.getJSON("/before/paper/getPaperList.do",{pageNo:0,pageSize:8,years:"2014",sortType:1,subjectId:a},function(a){if("0800001"==a.rtnCode&&r(e).append(s("暂时没有数据，请耐心等待哦")).fadeIn(500),"0000000"==a.rtnCode)for(var o=a.bizData,n=0;n<o.length;n++){var l=o[n].paperName,c=o[n].createDate,i=o[n].resources,d=new Date(c).Format("yyyy-MM-dd"),p='<li class="item"><a target="_blank" href="'+i+'"><span class="subject-n"><strong>'+t+'</strong></span><span class="subject-t">'+l+'</span><span class="subject-d">上传时间：'+d+"</span></a></li>";r(e).append(p).fadeIn(500)}})}var r=e("$");e("backToTop");var s=e("pageErrorTip"),l={$tabsList:r(".tabs-list"),$evaluatingSub:r("#evaluating-sub")},c=/^[0-9]*[1-9][0-9]*$/;l.$tabsList.on("click","li",function(){r(this).addClass("active").siblings().removeClass("active");var e=r(this).attr("id"),a=r(this).parent().attr("classifyType"),t=r(this).text();"1"==a&&o("#teacher-lecture-main",e,1),"2"==a&&o("#mentality-main",e,2),"3"==a&&n("#exam-main",e,t)}),t(),r("#teacher-lecture-search-btn").on("click",function(){var e=r("#teacher-lecture-search-input").val();window.open("/before/teacher-lecture.jsp?classifyType=1&searchV="+e)}),r("#exam-search-btn").on("click",function(){var e=r("#exam-search-input").val();window.open("/before/exam.jsp?searchV="+e)}),r("#mentality-search-btn").on("click",function(){var e=r("#mentality-search-input").val();window.open("/before/mentality.jsp?classifyType=2&searchV="+e)}),r("#main-volunteer-tabs").on("click","li",function(){r(this).addClass("active").siblings().removeClass("active");var e=r(this).index();r(".main-volunteer-box:eq("+e+")").show().siblings(".main-volunteer-box").hide()}),r(".evaluating-layer").on("click",".close-btn",function(){r(".tansLayer,.evaluating-layer").hide()}),r("#volunteer-flow, #volunteer-flow1").on("click",function(){r("#main-volunteer-tabs li").eq(1).click(),r("html,body").animate({scrollTop:r("#main-volunteer-box").offset().top},800)});var i=window.location.search,d=i.substr(14,1);"4"==d&&(r("#main-volunteer-tabs li").eq(1).click(),r("html,body").animate({scrollTop:r("#main-volunteer-box").offset().top},800)),r("#college-yzm").on("click",function(){r("#college-yzm").attr("src","/verifyCode/randomVerifyCode.do?type=1&code="+Math.random())}).attr("src","/verifyCode/randomVerifyCode.do?type=1"),r("#yxtj-sub").on("click",function(){var e=r("#score-input").val().trim(),t=r('input[name="batch"]:checked').val(),o=r('input[name="subjectType"]:checked').val(),n=r("#yzmCollege").val().trim();return""==e?(a("请输入分数"),!1):0==c.test(e)||3!=e.length?(a("请输入3位数字分数"),!1):void 0==o?(a("请选择文理科"),!1):""==n?(a("请填写验证码"),!1):void r.ajax({url:"/before/collegeRecommend/getCollegeList.do",type:"GET",dataType:"JSON",data:{m_aggregateScore:e,m_kelei:o,code:n},success:function(n){if(console.log(n),"0100006"==n.rtnCode||"1000004"==n.rtnCode||"0100005"==n.rtnCode)return a(n.msg),!1;if("0000000"==n.rtnCode){r(".school-list").html(""),r("#volunteer-flow3-layer,.tansLayer").show(),r("#volunteer-flow3-layer .no-school").hide(),r("#score-num").text(e+"分"),r("#batchV").text(t),r("#subjectTypeV").text(o);var s=r.parseJSON(n.bizData);console.log(s);var l=s.data.result.data;if(console.log(l.length),!l)return a(n.msg),!1;0==l.length&&r(".no-school").show();for(var c=0;c<l.length;c++)if(0==l[c].status)r("#no-school"+c).show();else for(var i=l[c].data,d=0;d<i.length;d++){var p=i[d].m_university_code,m=i[d].m_university_name,u='<div><a target="_blank" href="/consult/school_detail.jsp?code='+p+'">'+m+"</a></div>";r("#school-list"+c).append(u).show()}}}})}),r("#volunteer-flow3-layer").on("click",".close-btn",function(){r("#volunteer-flow3-layer,.tansLayer").hide(),r("#college-yzm").attr("src","/verifyCode/randomVerifyCode.do?type=1&code="+Math.random())}),r("#dreanSchoolBtn").on("click",function(){r("#volunteer-flow3-layer,.tansLayer").hide(),r("#college-yzm").attr("src","/verifyCode/randomVerifyCode.do?type=1&code="+Math.random()),r("#main-volunteer-tabs li:eq(0)").click()}),r("#yzmDreamSchool").on("click",function(){r("#yzmDreamSchool").attr("src","/verifyCode/randomVerifyCode.do?type=2&code="+Math.random())}).attr("src","/verifyCode/randomVerifyCode.do?type=2"),l.$evaluatingSub.on("click",function(){var e=r("#dream-score-input").val().trim(),t=r("#dream-school-input").val().trim(),o=r('input[name="dreamSubjectType"]:checked').val(),n=r("#yzmDream").val();return""==e?(a("请输入分数"),!1):0==c.test(e)||3!=e.length?(a("请输入3位数字分数"),!1):""==t?(a("请输入院校"),!1):t.length>50?(a("院校名称最多50个字"),!1):void 0==o?(a("请选择文理科"),!1):""==n?(a("请填写验证码"),!1):void r.ajax({url:"/appraisal/schoolTest.do",type:"GET",dataType:"JSON",data:{m_aggregateScore:e,m_university_name:t,m_kelei:o,code:n},success:function(n){if("1000006"==n.rtnCode||"1000004"==n.rtnCode)return a(n.msg),!1;var s=r.parseJSON(n.bizData);if(console.log(s),!s)return a(n.msg),!1;if("0000000"==n.rtnCode){if(0==s.data.length)return a("暂无数据,请检查输入信息"),!1;r("#dream-school-layer,.tansLayer").show(),r("#dreamScoreInfo").text(e),r("#dreamSubjectTypeInfo").text(o),r("#dreamSchoolInfo").text(t),r("#m_years").text(s.related.m_years),console.log(333),console.log(s.data),console.log(s.data.length);var l=s.data.m_averageScores,c=s.data.m_batch,i=s.data.m_lowestScore;console.log(l+"="+c+"="+i);var d='<ul><li class="pc">'+c+'</li><li class="result1"><span class="t">所需最低分数</span><span class="num"><strong>'+i+'</strong>分</span></li><li class="result2"><span class="t">所需平均分数</span><span class="num"><strong>'+l+"</strong>分</span></li></ul>";r("#dream-list").append(d);for(var p=0;p<s.data.length;p++){console.log(224);var m=s.data[p].m_averageScores,c=s.data[p].m_batch,u=s.data[p].m_lowestScore;console.log(m+"="+c+"="+u);var d='<ul><li class="pc">'+c+'</li><li class="result1"><span class="t">所需最低分数</span><span class="num"><strong>'+u+'</strong>分</span></li><li class="result2"><span class="t">所需平均分数</span><span class="num"><strong>'+m+"</strong>分</span></li></ul>";r("#dream-list").append(d)}}}})}),r("#dream-school-layer").on("click",".close-btn",function(){r("#dream-school-layer,.tansLayer").hide(),r("#yzmDreamSchool").attr("src","/verifyCode/randomVerifyCode.do?type=2&code="+Math.random())}),r("#precedence-yzmDreamSchool").on("click",function(){r("#precedence-yzmDreamSchool").attr("src","/verifyCode/randomVerifyCode.do?type=3&code="+Math.random())}).attr("src","/verifyCode/randomVerifyCode.do?type=3"),r("#precedence-sub").on("click",function(e){var t=r("#precedence-score-input").val().trim(),o=r("#precedence-yzmDream").val();return""==t?(a("请输入分数"),!1):0==c.test(t)||3!=t.length?(a("请输入3位数字分数"),!1):""==o?(r(".error-tips").text("请填写验证码").fadeIn(1e3).fadeOut(1e3),!1):void r.ajax({url:"/appraisal/findRanking.do",type:"GET",dataType:"JSON",data:{m_aggregateScore:t,code:o},success:function(e){if("1000006"==e.rtnCode||"1000004"==e.rtnCode)return void r(".error-tips").text(e.msg).fadeIn(1e3).fadeOut(1e3);var a=r.parseJSON(e.bizData);if(!a)return void r(".error-tips").text(e.msg).fadeIn(1e3).fadeOut(1e3);if(console.log(e.bizData),"0000000"==e.rtnCode){r("#precedence-list").html(""),r("#precedence-school-layer,.tansLayer").show(),r("#precedenceScoreInfo").text(t),r("#current-year").text(a.m_years);var o='<ul><li class="result1"><span class="t">文史类</span><span class="num"><b>'+(a.m_ws_ranking||"")+'</b>位</span></li><li class="result2"><span class="t">理工类</span><span class="num"><b>'+(a.m_lg_ranking||"")+"</b>位</span></li></ul>";(0!=a.m_ws_ranking||0!=a.m_lg_ranking)&&r("#precedence-list").append(o),0==r("#precedence-list").find("li").length&&r("#precedence-list").html('<p style="text-align: center;padding: 30px 0;">暂无数据,请检查输入信息</p>'),r("#confirm").on("click",function(e){r("#precedence-school-layer,.tansLayer").hide(),r("#precedence-yzmDreamSchool").attr("src","/verifyCode/randomVerifyCode.do?type=3&code="+Math.random())})}}})}),r("#precedence-school-layer").on("click",".close-btn",function(){r("#precedence-school-layer,.tansLayer").hide(),r("#precedence-yzmDreamSchool").attr("src","/verifyCode/randomVerifyCode.do?type=3&code="+Math.random())})});