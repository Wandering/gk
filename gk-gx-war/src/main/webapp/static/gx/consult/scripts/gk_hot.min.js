define(function(t){function e(){n(".content").css({height:"auto"}),n(".loader").hide(),n(".w1000").show()}var n=t("$"),a=function(t,e){var n,a=new RegExp("(^|)"+e+"=([^&]*)(&|$)","g").exec(t);return(n=a)?n[2]:""},i={nextBtn:n(".next-btn"),render:function(t,a){for(var i=[],o=0,r=t.length;r>o;o++){i.push('<div class="detile-content mt20">'),i.push('<div class="detile-header">');var s=o+1+10*(a-1);i.push('<span class="order-number">'+s+"</span>"),i.push('<span class="detile-title"><a href="/consult/gk_hot_detail.jsp?method=hot&id='+t[o].id+'">'+t[o].hotInformation+"</a></span>");var d=new Date(t[o].lastModDate).Format("yyyy-MM-dd hh:mm");i.push('<span class="fr">'+d+"</span>"),i.push("</div>"),null==t[o].informationSubContent||""==t[o].informationSubContent.trim()?i.push('<div class="detile-info mt20 hide">'):i.push('<div class="detile-info mt20">'),i.push('<img class="triangle" src="http://cdn.gaokao360.net/static/global/common/images/triangle.png" />'),i.push(t[o].informationSubContent),i.push("</div>"),i.push("</div>")}1==a?n("#wrapper").html(i.join("")):n("#wrapper").append(i.join("")),e()},getData:function(t){var e=this;n.get("/gkinformation/getAllInformation.do?pageSize=10&pageNo="+(t-1),function(a){if("0000000"===a.rtnCode){if(a.bizData.length<=0)return 1==t?(e.nextBtn.hide(),void n("#wrapper").html('<p style="margin: 20px 0; text-align: center">暂无信息！</p>')):void e.nextBtn.addClass("none").text("没有更多可加载！");1==t&&e.nextBtn.show(),e.nextBtn.attr("data-page",t),e.render(a.bizData,t)}else e.nextBtn.addClass("none").text("没有更多可加载！")})},nextPageHandle:function(){var t=this;this.nextBtn.on("click",function(e){if(!n(this).hasClass("none")){var a=n("#key_words").val();a?t.getSearch(parseInt(n(this).attr("data-page"))+1,a):t.getData(parseInt(n(this).attr("data-page"))+1)}})},getSearch:function(t,e){var a=this;n.get("/gkinformation/getInformationByKey.do?pageSize=10&pageNo="+t+"&key="+e,function(e){if("0000000"===e.rtnCode){if(e.bizData.length<=0)return 1==t?(a.nextBtn.hide(),void n("#wrapper").html('<p style="margin: 20px 0; text-align: center">没有搜索到可用的信息！ </p>')):void a.nextBtn.addClass("none").text("没有更多可加载！");a.nextBtn.show(),a.nextBtn.attr("data-page",t),a.render(e.bizData,t)}else a.nextBtn.addClass("none").text("没有更多可加载！")})}};n(document).ready(function(){var t=decodeURIComponent(a(window.location.href,"val"));t?(n("#key_words").val(t),i.getSearch(1,t)):i.getData(1),i.nextPageHandle(),n("#search").on("click",function(t){n(".next-btn").removeClass("none").text("加载更多...");var e=n("#key_words").val();e?i.getSearch(1,e):i.getData(1)})})});