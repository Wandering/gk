define(function(t){function e(t){var e=new RegExp("(^|\\?|&)"+t+"=([^&]*)(\\s|&|$)","i");return e.test(window.location.href)?unescape(RegExp.$2.replace(/\+/g," ")):""}function n(){a(".content").css({height:"auto"}),a(".loader").hide(),a(".w1000").show()}var a=t("$"),i={getProfessionInfo:function(t){var e=this;a.ajax({type:"get",url:"/majored/getMajoredInfo.do",contentType:"application/x-www-form-urlencoded;charset=utf-8",data:{code:t},dataType:"json",success:function(t){"0000000"===t.rtnCode&&e.renderInfo(t.bizData)},error:function(t){}})},renderInfo:function(t){a("#info_content").html('<img class="fl" src="'+(t.universityImage||"http://cdn.gaokao360.net/static/global/common/images/kqbk_banner_default.png")+'" /><div class="info"><ul><li class="school-name">'+t.name+"</li><li>学历层次："+t.educationLevel+"</li><li>学科门类："+t.subjectType+"</li><li>专业分类："+t.majoredType+"</li><li>授予学位："+(t.degree||" - ")+"</li></ul></div>")},getReationInfo:function(t){var e=this;a.ajax({type:"get",url:"/majored/getMajoredDetail.do",contentType:"application/x-www-form-urlencoded;charset=utf-8",data:{code:t},dataType:"json",success:function(t){"0000000"===t.rtnCode&&(e.renderReation(t.bizData),a("#tab_0").show(),e.addEventHandleTab())},error:function(t){}})},addEventHandleTab:function(){a(".tabs-list").on("click","li",function(t){a(this).hasClass("active")||(a(this).addClass("active").siblings().removeClass("active"),a("#tab_"+a(this).index()).show().siblings().hide())})},renderList:function(t){var e=[];return e.push("<ul>"),a.each(t,function(t,n){e.push("<li>"+n+"</li>")}),e.push("</ul>"),e.join("")},renderReation:function(t){console.log(t);var e=t.similarMajor?t.similarMajor.split("丨"):[],i='<p class="article">暂无信息！</p>',o=t.mainCourse?t.mainCourse.split("丨"):"";a("#tab_0").html(this.renderList(e)||i),o.length>0?a("#tab_1").html(this.renderList(o)):a("#tab_1").html(i),a("#tab_2").html('<p class="article">'+(t.workGuide||"暂无信息！")+"</p>");var s=t.openUniversity;if(0==s.length)return a("#tab_3").html(i),!1;for(var r='<div class="tipTxt"><strong>温馨提示：</strong> <i class="star"></i>号表示该专业在该院校招生</div><table class="table" id="openUniversity-table"><thead><tr><th>开设院校</th><th>计划人数</th><th>科类</th><th>收费标准</th></tr></thead><tbody>',l=0,d=s.length;d>l;l++){var c=s[l].isOpen,u="";u=0==c?"":'<i class="star"></i>',r+="<tr><td>"+u+'<a href="/consult/school_detail.jsp?id='+s[l].universityId+'">'+(s[l].universityName||"-")+"</a></td><td>"+(s[l].enrollNumber||"-")+"</td><td>"+s[l].subject+"</td><td>"+(s[l].feeStandard||"-")+"</td></tr>"}r+="</tbody></table>",a("#tab_3").html(r),n()}};a(document).ready(function(){var t=e("id");i.getProfessionInfo(t),i.getReationInfo(t)})});