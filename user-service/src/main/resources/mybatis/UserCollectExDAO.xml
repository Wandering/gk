<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cn.thinkjoy.gk.dao.ex.IUserCollectExDAO">
    <select id="getUserCollectPojoList" parameterType="java.util.Map" resultType="UserCollectPojo">
        SELECT cc.id as id,
            cc.userId as userId,
            cc.universityId as universityId,
            cc.createDate as createDate,
            uu.name as universityName,
            uu.provinceName as provinceName,
            uu.type as universityType,
            uu.subjection as subjection,
            dd.name as propertyName
        FROM gk_user_collect cc
        LEFT JOIN gk_university uu ON cc.universityId = uu.id
        LEFT JOIN gk_university_dict dd ON uu.property=dd.dictId AND dd.type='FEATURE'
        <where>
            AND cc.userId = #{userId}
        </where>
        <if test="offset != null">
            limit ${offset}, ${rows}
        </if>
    </select>

    <select id="isUniversityCollect" parameterType="java.util.Map" resultType="int">
        SELECT COUNT(*) FROM gk_user_collect
         WHERE userId = #{userId} AND universityId = #{universityId}
    </select>
</mapper>